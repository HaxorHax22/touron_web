<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#f97316" />
    <meta name="description" content="Plan your perfect Iceland adventure in under 60 seconds with AI-powered personalized itineraries" />
    <title>TourOn ‚Äì Your Iceland Adventure, Planned in Seconds</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Leaflet.js for interactive maps (no API key required) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
      
      * {
        font-family: 'Inter', sans-serif;
      }

      /* Fixed background for entire page */
      body {
        background-image: url('background_northern_lights.jpg');
        background-attachment: fixed;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        background-color: #0f172a; /* Fallback color */
        min-height: 100vh;
        line-height: 1.6;
      }

      /* Ensure background works on mobile */
      @media (max-width: 768px) {
        body {
          background-attachment: scroll;
        }
      }

      /* Fallback if background doesn't load */
      body.no-bg-image {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      }

      /* Ensure background covers everything */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(15, 23, 42, 0.4) 50%, rgba(0, 0, 0, 0.3) 100%);
        z-index: -2;
      }
      
      .gradient-bg {
        background: linear-gradient(135deg, rgba(249, 115, 22, 0.9) 0%, rgba(234, 88, 12, 0.9) 100%);
      }
      
      .glass-effect {
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        background: rgba(15, 23, 42, 0.88);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.4),
          0 0 0 1px rgba(255, 255, 255, 0.05) inset;
      }

      .glass-effect-light {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        background: rgba(15, 23, 42, 0.75);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 
          0 4px 24px rgba(0, 0, 0, 0.25),
          0 0 0 1px rgba(255, 255, 255, 0.03) inset;
      }

      .glass-card {
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        background: rgba(15, 23, 42, 0.65);
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow: 
          0 2px 16px rgba(0, 0, 0, 0.2),
          0 0 0 1px rgba(255, 255, 255, 0.02) inset;
      }
      
      .animate-float {
        animation: float 8s ease-in-out infinite;
      }
      
      @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        33% { transform: translateY(-12px) rotate(2deg); }
        66% { transform: translateY(-8px) rotate(-1deg); }
      }
      
      .animate-fade-in {
        animation: fadeIn 1.2s ease-out;
      }
      
      @keyframes fadeIn {
        0% { opacity: 0; transform: translateY(30px) scale(0.98); }
        100% { opacity: 1; transform: translateY(0) scale(1); }
      }

      .animate-slide-up {
        animation: slideUp 0.8s ease-out;
      }

      @keyframes slideUp {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
      }
      
      .custom-checkbox:checked {
        background-color: #f97316;
        border-color: #f97316;
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z'/%3e%3c/svg%3e");
      }
      
      .custom-radio:checked {
        background-color: #f97316;
        border-color: #f97316;
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
      }
      
      .loading-spinner {
        border: 2px solid rgba(249, 115, 22, 0.2);
        border-top: 2px solid #f97316;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .hover-lift {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .hover-lift:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
      }

      .hover-subtle {
        transition: all 0.3s ease;
      }

      .hover-subtle:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
      }
      
      .input-group {
        position: relative;
      }
      
      .input-group input:focus + .input-icon {
        color: #f97316;
      }
      
      html {
        scroll-behavior: smooth;
      }
      
      .section-divider {
        background: linear-gradient(90deg, transparent, rgba(249, 115, 22, 0.4), transparent);
        height: 2px;
        margin: 4rem 0;
        border-radius: 1px;
      }

      /* Enhanced floating elements */
      .floating-element {
        position: absolute;
        background: rgba(249, 115, 22, 0.25);
        border-radius: 50%;
        animation: float 10s ease-in-out infinite;
        filter: blur(1px);
      }

      .floating-element:nth-child(2) {
        animation-delay: 2.5s;
        background: rgba(249, 115, 22, 0.15);
      }

      .floating-element:nth-child(3) {
        animation-delay: 5s;
        background: rgba(249, 115, 22, 0.3);
      }

      .floating-element:nth-child(4) {
        animation-delay: 7.5s;
        background: rgba(249, 115, 22, 0.2);
      }

      /* Custom input styling */
      .custom-input {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .custom-input:focus {
        transform: translateY(-1px);
        box-shadow: 
          0 0 0 3px rgba(249, 115, 22, 0.1),
          0 8px 16px rgba(0, 0, 0, 0.2);
      }

      /* Custom Flatpickr styling */
      .flatpickr-calendar {
        background: rgba(15, 23, 42, 0.95) !important;
        backdrop-filter: blur(24px);
        border: 1px solid rgba(249, 115, 22, 0.2) !important;
        border-radius: 16px !important;
        box-shadow: 
          0 25px 50px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(255, 255, 255, 0.05) inset !important;
        overflow: hidden;
      }
      
      .flatpickr-months {
        background: transparent !important;
        padding: 16px !important;
      }
      
      .flatpickr-month {
        color: #f97316 !important;
        font-weight: 600 !important;
      }
      
      .flatpickr-weekdays {
        background: rgba(249, 115, 22, 0.1) !important;
        padding: 8px 0 !important;
      }
      
      .flatpickr-weekday {
        color: #f97316 !important;
        font-weight: 600 !important;
        font-size: 11px !important;
        text-transform: uppercase !important;
        letter-spacing: 1px !important;
      }
      
      .flatpickr-day {
        color: #ffffff !important;
        border-radius: 10px !important;
        margin: 2px !important;
        transition: all 0.2s ease !important;
      }
      
      .flatpickr-day:hover {
        background: rgba(249, 115, 22, 0.15) !important;
        color: #f97316 !important;
        transform: scale(1.1) !important;
      }
      
      .flatpickr-day.selected {
        background: linear-gradient(135deg, #f97316, #ea580c) !important;
        color: white !important;
        font-weight: 600 !important;
        transform: scale(1.05) !important;
      }
      
      .flatpickr-day.inRange {
        background: rgba(249, 115, 22, 0.2) !important;
        color: #f97316 !important;
      }
      
      .flatpickr-day.startRange,
      .flatpickr-day.endRange {
        background: linear-gradient(135deg, #f97316, #ea580c) !important;
        color: white !important;
        font-weight: 600 !important;
      }
      
      .flatpickr-prev-month,
      .flatpickr-next-month {
        color: #f97316 !important;
        transition: all 0.2s ease !important;
      }
      
      .flatpickr-prev-month:hover,
      .flatpickr-next-month:hover {
        color: #ea580c !important;
        background: rgba(249, 115, 22, 0.1) !important;
      }

      /* Mobile optimizations */
      @media (max-width: 640px) {
        .glass-effect {
          backdrop-filter: blur(8px);
          padding: 1.5rem !important;
          margin: 0.5rem !important;
        }
        
        .glass-effect-light {
          padding: 1rem !important;
        }
        
        /* Improve touch targets */
        button, .btn, input, select, textarea {
          min-height: 44px;
        }
        
        /* Better spacing on mobile */
        .space-y-6 > * + * {
          margin-top: 1rem !important;
        }
        
        /* Optimize text sizes */
        h1 { line-height: 1.1 !important; }
        h2 { line-height: 1.2 !important; }
        
        /* Improve form readability */
        input, select, textarea {
          font-size: 16px !important; /* Prevents zoom on iOS */
        }

        /* Better mobile navigation */
        .hover-lift:hover {
          transform: none; /* Disable hover effects on mobile */
        }

        /* Optimize floating elements for mobile */
        .floating-element {
          display: none;
        }

        /* Better mobile map controls */
        #mapControls button {
          font-size: 12px;
          padding: 8px 12px;
        }

        /* Mobile-friendly comparison table */
        table {
          font-size: 12px !important;
        }
        
        th, td {
          padding: 8px 4px !important;
        }
      }

             /* Tablet optimizations */
       @media (min-width: 641px) and (max-width: 1024px) {
         .glass-effect {
           padding: 2rem !important;
         }
       }

      /* Ensure all sections have proper spacing */
      .page-section {
        position: relative;
        z-index: 1;
      }

      /* Button enhancements */
      .btn-primary {
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        box-shadow: 
          0 4px 16px rgba(249, 115, 22, 0.4),
          0 0 0 1px rgba(255, 255, 255, 0.1) inset;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
        box-shadow: 
          0 8px 32px rgba(249, 115, 22, 0.6),
          0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        transform: translateY(-2px) scale(1.02);
      }

      /* Progress indicator improvements */
      .progress-step {
        transition: all 0.4s ease;
      }

      .progress-step.active {
        transform: scale(1.1);
      }

      .progress-step.active .step-number {
        background: linear-gradient(135deg, #f97316, #ea580c);
        box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
      }

      /* Typography improvements */
      h1, h2, h3, h4, h5, h6 {
        font-weight: 700;
        letter-spacing: -0.025em;
        line-height: 1.2;
      }

      .text-gradient {
        background: linear-gradient(135deg, #f97316, #ea580c);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Improved spacing utilities */
      .space-y-fluid > * + * {
        margin-top: clamp(1rem, 4vw, 2rem);
      }

      /* Mobile optimizations */
      @media (max-width: 768px) {
        .floating-element {
          display: none;
        }
        
        .glass-effect, .glass-effect-light, .glass-card {
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
        }

        /* Mobile typography */
        h1 {
          font-size: 3rem !important;
        }

        h2 {
          font-size: 2.5rem !important;
          line-height: 1.1 !important;
        }

        h3 {
          font-size: 1.5rem !important;
        }

        /* Mobile spacing */
        .glass-effect {
          padding: 1.5rem !important;
          margin: 1rem !important;
        }

        .glass-effect-light {
          padding: 1.25rem !important;
        }

        .glass-card {
          padding: 1rem !important;
        }

        /* Mobile form optimizations */
        .grid.md\\:grid-cols-2 {
          grid-template-columns: 1fr !important;
          gap: 1rem !important;
        }

        .grid.md\\:grid-cols-3 {
          grid-template-columns: 1fr !important;
          gap: 1rem !important;
        }

        .grid.grid-cols-2.lg\\:grid-cols-3 {
          grid-template-columns: 1fr !important;
          gap: 0.75rem !important;
        }

        /* Mobile button sizing */
        button {
          padding: 1rem 1.5rem !important;
          font-size: 1rem !important;
        }

        .btn-primary {
          padding: 1.25rem 2rem !important;
        }

        /* Mobile input sizing */
        input, select, textarea {
          padding: 0.875rem 1rem !important;
          font-size: 1rem !important;
        }

        /* Mobile progress indicator */
        .progress-step span {
          font-size: 0.75rem !important;
        }

        .progress-step .step-number {
          width: 2rem !important;
          height: 2rem !important;
          font-size: 0.875rem !important;
        }

        /* Mobile value propositions */
        .grid.md\\:grid-cols-3 > div {
          text-align: center;
          padding: 1.5rem 1rem !important;
        }

        /* Mobile hero adjustments */
        .text-7xl {
          font-size: 3rem !important;
        }

        .text-6xl {
          font-size: 2.25rem !important;
        }

        .text-5xl {
          font-size: 2rem !important;
        }

        .text-xl {
          font-size: 1.125rem !important;
        }

        /* Mobile section spacing */
        section {
          padding: 2rem 1rem !important;
        }

        .py-20 {
          padding-top: 3rem !important;
          padding-bottom: 3rem !important;
        }

        .py-16 {
          padding-top: 2.5rem !important;
          padding-bottom: 2.5rem !important;
        }

                 /* Mobile checkbox/radio improvements */
         .grid.grid-cols-2.lg\\:grid-cols-3 label {
           flex-direction: row !important;
           text-align: left !important;
           padding: 1rem !important;
           align-items: flex-start !important;
         }

         .grid.grid-cols-2.lg\\:grid-cols-3 label input {
           margin: 0.25rem 0.75rem 0 0 !important;
           flex-shrink: 0 !important;
         }

         .grid.grid-cols-2.lg\\:grid-cols-3 label i {
           margin: 0 0.75rem 0 0 !important;
           flex-shrink: 0 !important;
         }

         .grid.grid-cols-2.lg\\:grid-cols-3 label div {
           flex: 1 !important;
         }

        /* Mobile travel pace cards */
        .grid.md\\:grid-cols-3 label {
          padding: 1.25rem !important;
        }

        /* Touch-friendly interactions */
        button, input, label {
          min-height: 44px;
        }

        /* Mobile calendar adjustments */
        .flatpickr-calendar {
          font-size: 0.875rem !important;
        }
      }

             /* Desktop optimizations */
       @media (min-width: 769px) {
         body {
           background-attachment: fixed;
         }
       }

       /* Tablet optimizations */
       @media (min-width: 769px) and (max-width: 1024px) {
         .glass-effect {
           padding: 2rem;
         }

         .text-6xl {
           font-size: 3.5rem;
         }

         .text-5xl {
           font-size: 2.5rem;
         }

         /* Tablet grid adjustments */
         .grid.lg\\:grid-cols-3 {
           grid-template-columns: repeat(2, 1fr) !important;
         }
       }

             /* Small mobile (phones in portrait) */
       @media (max-width: 480px) {
         .glass-effect {
           margin: 0.5rem !important;
           border-radius: 1rem !important;
         }

         .rounded-3xl {
           border-radius: 1rem !important;
         }

         .rounded-2xl {
           border-radius: 0.75rem !important;
         }

         /* Extra small text adjustments */
         .text-6xl {
           font-size: 2rem !important;
         }

         .text-2xl {
           font-size: 1.25rem !important;
         }

         /* Compact progress indicator */
         .progress-step {
           flex-direction: column !important;
           align-items: center !important;
           gap: 0.25rem !important;
         }

         .flex-1.mx-6 {
           display: none !important;
         }

         /* Stack interest cards vertically on very small screens */
         .grid.grid-cols-2 {
           grid-template-columns: 1fr !important;
         }

         /* Ensure all grids are single column on small mobile */
         .grid.grid-cols-2.lg\\:grid-cols-3 {
           grid-template-columns: 1fr !important;
         }

         /* Mobile-first button sizing */
         .btn-primary {
           font-size: 0.875rem !important;
           padding: 1rem 1.5rem !important;
         }

         /* Adjust mobile form elements */
         .glass-card {
           padding: 0.75rem !important;
         }

         /* Better mobile spacing for interest cards */
         .grid.grid-cols-2.lg\\:grid-cols-3 label {
           padding: 0.75rem !important;
         }
       }

      /* Landscape phone optimization */
      @media (max-height: 500px) and (orientation: landscape) {
        .min-h-screen {
          min-height: auto !important;
          padding: 1rem 0 !important;
        }

        .glass-effect {
          padding: 1rem !important;
        }

        .text-6xl, .text-5xl {
          font-size: 1.875rem !important;
        }
      }

             /* High DPI displays */
       @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
         .glass-effect, .glass-effect-light, .glass-card {
           backdrop-filter: blur(16px);
           -webkit-backdrop-filter: blur(16px);
         }
       }

       /* Mobile calendar enhancements */
       .calendar-open {
         overflow: hidden;
       }

       @media (max-width: 768px) {
         .flatpickr-calendar {
           width: 100% !important;
           max-width: 320px !important;
           margin: 0 auto !important;
           left: 50% !important;
           transform: translateX(-50%) !important;
         }

         .flatpickr-months {
           padding: 1rem !important;
         }

         .flatpickr-day {
           width: 2.5rem !important;
           height: 2.5rem !important;
           line-height: 2.5rem !important;
         }
       }

       /* iOS Safari specific fixes */
       @supports (-webkit-touch-callout: none) {
         .glass-effect, .glass-effect-light, .glass-card {
           -webkit-backdrop-filter: blur(12px);
           backdrop-filter: blur(12px);
         }

         /* Fix iOS viewport height issues */
         .min-h-screen {
           min-height: -webkit-fill-available;
         }
       }

               /* Android Chrome specific fixes */
        @media screen and (max-width: 768px) {
          /* Prevent horizontal scrolling */
          body {
            overflow-x: hidden;
            /* Ensure background works on mobile */
            background-attachment: scroll;
          }

          /* Fix Android viewport issues */
          .min-h-screen {
            min-height: 100vh;
            min-height: calc(var(--vh, 1vh) * 100);
          }
        }

        /* Map interaction animations */
        .map-control-btn {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          transform: translateY(0);
        }

        .map-control-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .map-control-btn:active {
          transform: translateY(0);
          transition: all 0.1s ease;
        }

        /* Legend item animations */
        .legend-item {
          transition: all 0.3s ease;
        }

        .legend-item:hover {
          transform: translateX(4px);
        }

        /* Route statistics fade in */
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .route-stats-enter {
          animation: fadeInUp 0.5s ease-out;
        }

        /* Fullscreen transition */
        .fullscreen-transition {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Pulse animation for markers */
        @keyframes markerPulse {
          0% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.3); opacity: 0.7; }
          100% { transform: scale(1); opacity: 1; }
        }

        .marker-pulse {
          animation: markerPulse 0.6s ease-in-out;
        }

       /* PWA-like styling */
       @media (display-mode: standalone) {
         .glass-effect {
           margin-top: env(safe-area-inset-top);
         }
       }
    </style>
  </head>
  <body class="text-white">
    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center text-center px-6 relative page-section">
      <!-- Enhanced Floating elements -->
      <div class="floating-element w-4 h-4 top-20 left-10 opacity-60"></div>
      <div class="floating-element w-6 h-6 top-40 right-20 opacity-40"></div>
      <div class="floating-element w-3 h-3 bottom-32 left-20 opacity-50"></div>
      <div class="floating-element w-5 h-5 top-60 right-40 opacity-30"></div>
      
      <div class="glass-effect p-12 rounded-3xl max-w-4xl relative z-10 hover-lift animate-fade-in">
        <!-- Logo and Branding -->
        <div class="mb-8">
          <div class="mb-6">
            <img src="touron_logo.png" alt="TourOn Logo" class="mx-auto h-24 sm:h-32 w-auto hover:scale-105 transition-transform duration-300 drop-shadow-2xl">
          </div>
          <h1 class="text-4xl sm:text-6xl lg:text-7xl font-bold mb-3 text-orange-400 tracking-tight">TourOn</h1>
          <div class="w-32 h-1.5 bg-gradient-to-r from-orange-400 to-orange-600 mx-auto rounded-full"></div>
          <p class="text-lg text-orange-200 mt-3 font-medium">AI-Powered Iceland Adventure Planner</p>
        </div>
        
                 <!-- Main Headline -->
         <div class="mb-12 space-y-fluid">
           <h2 class="text-3xl sm:text-4xl lg:text-6xl font-extrabold mb-8 leading-tight">
             <span class="text-white">Your Perfect Iceland Adventure,</span><br />
             <span class="text-gradient">Planned in Under 60 Seconds</span>
           </h2>
           <p class="text-lg sm:text-xl text-gray-200 max-w-3xl mx-auto leading-relaxed px-4">
             Skip the endless research. Our AI creates personalized Iceland itineraries based on your interests, pace, and travel dates. 
             <span class="text-gradient font-semibold">Real places, real experiences, zero hassle.</span>
           </p>
         </div>
        
        <!-- Value Propositions -->
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-12 max-w-5xl mx-auto px-4">
          <div class="glass-effect-light p-6 rounded-xl hover-lift">
            <div class="w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center mb-4 mx-auto">
              <i class="fas fa-bolt text-2xl text-green-400"></i>
            </div>
            <h3 class="text-lg font-semibold text-white mb-2">Lightning Fast AI</h3>
            <p class="text-gray-300 text-sm">Get your complete Iceland itinerary in under 60 seconds. No lengthy questionnaires.</p>
          </div>
          <div class="glass-effect-light p-6 rounded-xl hover-lift">
            <div class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center mb-4 mx-auto">
              <i class="fas fa-heart text-2xl text-purple-400"></i>
            </div>
            <h3 class="text-lg font-semibold text-white mb-2">Hyper-Personalized</h3>
            <p class="text-gray-300 text-sm">Budget, pace, interests, group size - every detail matters for your perfect trip.</p>
          </div>
          <div class="glass-effect-light p-6 rounded-xl hover-lift">
            <div class="w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center mb-4 mx-auto">
              <i class="fas fa-gift text-2xl text-blue-400"></i>
            </div>
            <h3 class="text-lg font-semibold text-white mb-2">100% Free Forever</h3>
            <p class="text-gray-300 text-sm">No hidden fees, no premium plans. Professional itineraries at zero cost.</p>
          </div>
        </div>

        <!-- Comparison Badge -->
        <div class="glass-effect-light p-4 rounded-2xl mb-8 max-w-2xl mx-auto">
          <div class="flex items-center justify-center gap-3 text-sm">
            <div class="flex items-center gap-2 text-orange-300">
              <i class="fas fa-trophy text-lg"></i>
              <span class="font-semibold">Better than other travel planners:</span>
            </div>
            <div class="flex gap-4 text-gray-300">
              <span class="flex items-center gap-1">
                <i class="fas fa-check text-green-400"></i>Iceland Expert
              </span>
              <span class="flex items-center gap-1">
                <i class="fas fa-check text-green-400"></i>Always Free
              </span>
              <span class="flex items-center gap-1">
                <i class="fas fa-check text-green-400"></i>60s Results
              </span>
            </div>
          </div>
        </div>
        
        <!-- Enhanced CTA -->
        <div class="space-y-4 px-4">
          <a href="#form" class="inline-flex items-center gap-2 sm:gap-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 sm:px-12 py-4 sm:py-6 rounded-2xl font-bold text-lg sm:text-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 uppercase tracking-wide shadow-xl hover:shadow-2xl transform hover:scale-105">
            <i class="fas fa-magic text-xl sm:text-2xl"></i>
            <span class="text-center">Start Planning My Iceland Trip</span>
            <i class="fas fa-arrow-right hidden sm:inline"></i>
          </a>
          <p class="text-sm text-gray-400">
            <i class="fas fa-shield-alt mr-1"></i>
            Free to use ‚Ä¢ No signup required ‚Ä¢ Instant results
          </p>
        </div>
      </div>
    </section>

    <!-- Trip Form -->
    <section id="form" class="py-20 px-6 relative page-section">
      <!-- Section divider -->
      <div class="section-divider"></div>
      
      <!-- More floating elements for this section -->
      <div class="floating-element w-2 h-2 top-10 left-1/4 opacity-20"></div>
      <div class="floating-element w-4 h-4 top-20 right-1/3 opacity-30"></div>
      
      <div class="max-w-4xl mx-auto">
        <!-- Form Header -->
        <div class="text-center mb-12 animate-fade-in">
          <div class="glass-effect-light p-8 rounded-3xl hover-lift mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl mb-6 shadow-lg">
              <i class="fas fa-map-marked-alt text-2xl text-white"></i>
            </div>
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 text-orange-300">Let's Plan Your Adventure</h2>
            <p class="text-lg sm:text-xl text-gray-200 max-w-2xl mx-auto px-4">Tell us a bit about yourself and what you'd love to experience in Iceland</p>
            <div class="w-40 h-1.5 bg-gradient-to-r from-orange-400 to-orange-600 mx-auto rounded-full mt-6"></div>
          </div>
        </div>
        
        <!-- Progress Indicator -->
                 <div class="glass-card p-6 rounded-2xl mb-12 max-w-2xl mx-auto hover-subtle">
           <div class="flex items-center justify-between text-sm">
             <div class="progress-step active flex items-center gap-3 text-orange-300">
               <div class="step-number w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg">1</div>
               <span class="font-semibold">Your Details</span>
             </div>
             <div class="flex-1 mx-6 h-1 bg-gray-600/50 rounded-full"></div>
             <div class="progress-step flex items-center gap-3 text-gray-400">
               <div class="step-number w-10 h-10 bg-gray-600/50 rounded-full flex items-center justify-center text-white font-bold">2</div>
               <span class="font-medium hidden sm:block">Preferences</span>
             </div>
             <div class="flex-1 mx-6 h-1 bg-gray-600/50 rounded-full"></div>
             <div class="progress-step flex items-center gap-3 text-gray-400">
               <div class="step-number w-10 h-10 bg-gray-600/50 rounded-full flex items-center justify-center text-white font-bold">3</div>
               <span class="font-medium hidden sm:block">Your Itinerary</span>
             </div>
           </div>
         </div>
        
        <form id="tripForm" class="space-y-8 glass-effect p-10 rounded-3xl hover-lift">
          <!-- Personal Information Section -->
          <div class="space-y-6">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-user text-orange-400"></i>
              </div>
              <h3 class="text-2xl font-bold text-orange-300">About You</h3>
            </div>
            
            <div class="grid sm:grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
              <!-- Full Name -->
              <div class="input-group">
                <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-3">
                  <i class="fas fa-user"></i>Full Name
                  <span class="text-gray-400 text-xs">(Optional)</span>
                </label>
                <input 
                  type="text" 
                  id="name" 
                  class="w-full px-6 py-4 rounded-xl bg-gray-700/40 text-white placeholder-gray-400 border border-gray-600/50 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 focus:outline-none custom-input" 
                  placeholder="Enter your name (optional)"
                />
              </div>

              <!-- Email Address -->
              <div class="input-group">
                <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-3">
                  <i class="fas fa-envelope"></i>Email Address
                  <span class="text-red-400">*</span>
                </label>
                <input 
                  type="email" 
                  id="email" 
                  required 
                  class="w-full px-6 py-4 rounded-xl bg-gray-700/40 text-white placeholder-gray-400 border border-gray-600/50 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 focus:outline-none custom-input" 
                  placeholder="your@email.com"
                />
                <p class="text-xs text-gray-400 mt-1">Required for form submission (email delivery coming soon!)</p>
              </div>
            </div>
          </div>

          <!-- Travel Dates Section -->
          <div class="space-y-6 pt-8 border-t border-gray-600">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-calendar-alt text-blue-400"></i>
              </div>
              <h3 class="text-2xl font-bold text-orange-300">When Are You Visiting?</h3>
            </div>
            
            <div class="input-group">
              <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-3">
                <i class="fas fa-calendar-alt"></i>Travel Dates
                <span class="text-red-400">*</span>
              </label>
              <div class="relative">
                                  <input 
                    type="text" 
                    id="dates" 
                    placeholder="Click to select your travel dates" 
                    required 
                    readonly
                    class="w-full px-6 py-4 pl-14 rounded-xl bg-gray-700/40 text-white placeholder-gray-400 border border-gray-600/50 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 focus:outline-none custom-input cursor-pointer" 
                  />
                <i class="fas fa-calendar-alt absolute left-5 top-1/2 transform -translate-y-1/2 text-orange-400"></i>
              </div>
              <div class="flex items-center gap-4 mt-3 text-sm">
                <p class="text-gray-400 flex items-center gap-1">
                  <i class="fas fa-info-circle"></i>
                  Select check-in and check-out dates
                </p>
                <div id="seasonTip" class="text-orange-300 font-medium hidden"></div>
              </div>
            </div>
          </div>

                      <!-- Travel Preferences Section -->
          <div class="space-y-6 pt-8 border-t border-gray-600">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-heart text-purple-400"></i>
              </div>
              <h3 class="text-2xl font-bold text-orange-300">What Excites You?</h3>
            </div>
            
            <!-- Interests -->
            <div>
              <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-4">
                <i class="fas fa-heart"></i>Choose your interests 
                <span class="text-gray-400 text-xs">(select all that apply)</span>
              </label>
              <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Nature & Landscapes" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-leaf text-green-400 group-hover:text-green-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Nature & Landscapes</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Epic vistas, wildlife</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Waterfalls & Geysers" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-tint text-blue-400 group-hover:text-blue-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Waterfalls & Geysers</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Gullfoss, Geysir, Sk√≥gafoss</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Adventure & Hiking" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-hiking text-red-400 group-hover:text-red-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Adventure & Hiking</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Glaciers, trails, extreme sports</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Food & Culture" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-utensils text-yellow-400 group-hover:text-yellow-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Food & Culture</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Local cuisine, museums, history</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Northern Lights" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-star text-purple-400 group-hover:text-purple-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Northern Lights</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Aurora hunting, stargazing</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Photography & Instagram" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-camera text-indigo-400 group-hover:text-indigo-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Photography & Instagram</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Perfect shots, viral spots</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Relaxation & Wellness" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-spa text-cyan-400 group-hover:text-cyan-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Relaxation & Wellness</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Hot springs, spas, zen time</p>
                  </div>
                </label>
                <label class="flex items-center space-x-3 p-5 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="checkbox" name="interests" value="Road Trips & Scenic Drives" class="w-5 h-5 custom-checkbox text-orange-500 bg-gray-700/50 border-gray-500 rounded focus:ring-orange-500 focus:ring-2" />
                  <i class="fas fa-car text-orange-400 group-hover:text-orange-300 text-lg"></i>
                  <div>
                    <span class="text-white group-hover:text-orange-200 font-semibold">Road Trips & Scenic Drives</span>
                    <p class="text-xs text-gray-400 group-hover:text-gray-300">Ring Road, epic routes</p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Travel Pace -->
            <div>
              <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-4">
                <i class="fas fa-tachometer-alt"></i>What's your travel style?
              </label>
              <div class="grid md:grid-cols-3 gap-4">
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="pace" value="Relaxed" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-spa text-green-400 group-hover:text-green-300"></i>
                      <span class="text-white group-hover:text-orange-200 font-semibold">Relaxed Explorer</span>
                    </div>
                    <p class="text-sm text-gray-400 group-hover:text-gray-300">Take it slow, savor moments, plenty of rest time</p>
                  </div>
                </label>
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card border-2 border-orange-400/70 bg-orange-400/15 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="pace" value="Moderate" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" checked />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-walking text-blue-400 group-hover:text-blue-300"></i>
                      <span class="text-orange-200 font-semibold">Balanced Adventurer</span>
                      <span class="text-xs bg-orange-500 text-white px-2 py-1 rounded-full">Recommended</span>
                    </div>
                    <p class="text-sm text-gray-300">Perfect mix of sightseeing and experiences</p>
                  </div>
                </label>
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="pace" value="Fast" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-running text-red-400 group-hover:text-red-300"></i>
                      <span class="text-white group-hover:text-orange-200 font-semibold">Action Packed</span>
                    </div>
                    <p class="text-sm text-gray-400 group-hover:text-gray-300">See everything, busy schedule, maximum experiences</p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Budget Preferences -->
            <div>
              <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-4">
                <i class="fas fa-wallet"></i>What's your budget style?
              </label>
              <div class="grid md:grid-cols-3 gap-4">
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="budget" value="Budget-Friendly" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-piggy-bank text-green-400 group-hover:text-green-300"></i>
                      <span class="text-white group-hover:text-orange-200 font-semibold">Budget-Friendly</span>
                    </div>
                    <p class="text-sm text-gray-400 group-hover:text-gray-300">Affordable eats, free attractions, budget accommodations</p>
                  </div>
                </label>
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card border-2 border-orange-400/70 bg-orange-400/15 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="budget" value="Mid-Range" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" checked />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-balance-scale text-blue-400 group-hover:text-blue-300"></i>
                      <span class="text-orange-200 font-semibold">Mid-Range</span>
                      <span class="text-xs bg-orange-500 text-white px-2 py-1 rounded-full">Popular</span>
                    </div>
                    <p class="text-sm text-gray-300">Good restaurants, some tours, comfortable stays</p>
                  </div>
                </label>
                <label class="flex items-start space-x-3 p-6 rounded-xl glass-card hover:border-orange-400/50 hover:bg-orange-400/5 transition-all duration-300 cursor-pointer group hover-subtle">
                  <input type="radio" name="budget" value="Luxury" class="w-5 h-5 custom-radio text-orange-500 bg-gray-700/50 border-gray-500 focus:ring-orange-500 focus:ring-2 mt-1" />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-crown text-yellow-400 group-hover:text-yellow-300"></i>
                      <span class="text-white group-hover:text-orange-200 font-semibold">Luxury</span>
                    </div>
                    <p class="text-sm text-gray-400 group-hover:text-gray-300">Premium experiences, fine dining, luxury hotels</p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Group Size -->
            <div>
              <label class="flex items-center gap-2 text-sm font-semibold text-orange-200 mb-4">
                <i class="fas fa-users"></i>Who's traveling?
              </label>
              <div class="grid md:grid-cols-2 gap-4">
                <div class="input-group">
                  <select 
                    id="groupSize" 
                    class="w-full px-6 py-4 rounded-xl bg-gray-700/40 text-white border border-gray-600/50 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 focus:outline-none custom-input"
                  >
                    <option value="Solo traveler">üß≥ Solo traveler</option>
                    <option value="Couple" selected>üë´ Couple</option>
                    <option value="Family with kids">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family with kids</option>
                    <option value="Group of friends">üë• Group of friends</option>
                    <option value="Large group (6+)">üöå Large group (6+)</option>
                  </select>
                </div>
                <div class="input-group">
                  <input 
                    type="text" 
                    id="specialRequests" 
                    placeholder="Special requests (accessibility, dietary, etc.)"
                    class="w-full px-4 sm:px-6 py-3 sm:py-4 rounded-xl bg-gray-700/40 text-white placeholder-gray-400 border border-gray-600/50 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 focus:outline-none custom-input text-sm sm:text-base" 
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="pt-8 border-t border-gray-600">
                         <button 
               type="submit" 
               id="submitBtn"
               class="w-full btn-primary text-white font-bold py-4 sm:py-6 rounded-2xl text-lg sm:text-xl uppercase tracking-wide flex items-center justify-center gap-2 sm:gap-3"
             >
              <span id="btnText" class="flex items-center gap-3">
                <i class="fas fa-magic text-2xl"></i>
                <span>Create My Iceland Adventure</span>
                <i class="fas fa-arrow-right"></i>
              </span>
              <div id="loadingSpinner" class="loading-spinner hidden"></div>
            </button>
            <p class="text-center text-sm text-gray-400 mt-4">
              <i class="fas fa-clock mr-1"></i>
              This usually takes 10-15 seconds
            </p>
          </div>
        </form>
      </div>
    </section>

    <!-- Itinerary Output -->
    <section id="itineraryOutput" class="hidden py-20 px-6 page-section">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <div class="glass-effect-light p-8 rounded-2xl hover-lift mb-8">
            <i class="fas fa-route text-5xl text-orange-400 mb-6"></i>
            <h2 class="text-4xl font-bold text-orange-400 mb-4">Your Iceland Itinerary</h2>
            <div class="w-32 h-1 bg-gradient-to-r from-orange-400 to-orange-600 mx-auto rounded-full"></div>
          </div>
        </div>
        
        <div class="glass-effect p-8 rounded-3xl shadow-2xl hover-lift">
          <!-- Itinerary Header -->
          <div class="border-b border-gray-600 pb-6 mb-8">
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-2xl font-bold text-orange-300 mb-2">Your Personalized Iceland Adventure</h3>
                <p class="text-gray-400">Generated with advanced AI ‚Ä¢ Tailored just for you</p>
              </div>
              <div class="text-right">
                <div class="text-sm text-gray-400">Trip Cost Estimate</div>
                <div id="costEstimate" class="text-xl font-bold text-green-400">Calculating...</div>
              </div>
            </div>
          </div>

          <!-- Main Itinerary Content -->
          <div id="outputText" class="whitespace-pre-line text-white text-lg leading-relaxed mb-8"></div>

          <!-- Travel Tips Section -->
          <div class="glass-card p-6 rounded-2xl mb-6">
            <h4 class="text-xl font-bold text-orange-300 mb-4 flex items-center gap-2">
              <i class="fas fa-lightbulb"></i>
              Smart Travel Tips for Iceland
            </h4>
            <div class="grid md:grid-cols-2 gap-4 text-sm">
              <div class="space-y-2">
                <p class="flex items-start gap-2">
                  <i class="fas fa-snowflake text-blue-400 mt-1"></i>
                  <span><strong>Weather:</strong> Always pack layers, weather changes quickly</span>
                </p>
                <p class="flex items-start gap-2">
                  <i class="fas fa-car text-green-400 mt-1"></i>
                  <span><strong>Driving:</strong> Rent a 4WD for Ring Road adventures</span>
                </p>
                <p class="flex items-start gap-2">
                  <i class="fas fa-money-bill-wave text-yellow-400 mt-1"></i>
                  <span><strong>Currency:</strong> Iceland uses ISK, cards accepted everywhere</span>
                </p>
              </div>
              <div class="space-y-2">
                <p class="flex items-start gap-2">
                  <i class="fas fa-phone text-red-400 mt-1"></i>
                  <span><strong>Emergency:</strong> 112 for all emergency services</span>
                </p>
                <p class="flex items-start gap-2">
                  <i class="fas fa-wifi text-purple-400 mt-1"></i>
                  <span><strong>Internet:</strong> Free WiFi widely available</span>
                </p>
                <p class="flex items-start gap-2">
                  <i class="fas fa-clock text-orange-400 mt-1"></i>
                  <span><strong>Daylight:</strong> Summer: 19+ hours, Winter: 4-5 hours</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Interactive Iceland Map with Your Route -->
          <div class="glass-card p-6 rounded-2xl mb-6">
            <h4 class="text-xl font-bold text-orange-300 mb-4 flex items-center gap-2">
              <i class="fas fa-map-marked-alt"></i>
              Your Personalized Iceland Route
            </h4>
            <p class="text-sm text-gray-400 mb-4">Interactive map showing your destinations and suggested routes</p>
            <div class="rounded-xl overflow-hidden">
              <div id="customMap" style="height: 300px; width: 100%; background: #1e293b; border-radius: 12px; position: relative;" class="sm:h-96 lg:h-[450px]">
                <div class="flex items-center justify-center h-full">
                  <div class="text-center">
                    <div class="loading-spinner mb-3"></div>
                    <span class="text-gray-300">Loading your personalized route...</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-4 space-y-3">
              <!-- Interactive Map Controls -->
              <div class="flex flex-wrap gap-1 sm:gap-2 justify-center sm:justify-start" id="mapControls">
                <button id="fitMapBtn" class="glass-effect-light hover:bg-orange-500/20 text-orange-300 hover:text-orange-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2">
                  <i class="fas fa-expand-arrows-alt"></i>
                  Fit All Destinations
                </button>
                <button id="showRouteBtn" class="glass-effect-light hover:bg-blue-500/20 text-blue-300 hover:text-blue-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2">
                  <i class="fas fa-route"></i>
                  <span>Show Route</span>
                </button>
                <button id="mapStyleBtn" class="glass-effect-light hover:bg-purple-500/20 text-purple-300 hover:text-purple-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2">
                  <i class="fas fa-palette"></i>
                  Switch Style
                </button>
                <button id="fullscreenBtn" class="glass-effect-light hover:bg-green-500/20 text-green-300 hover:text-green-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2">
                  <i class="fas fa-expand"></i>
                  Fullscreen
                </button>
              </div>
              
              <!-- Interactive Legend -->
              <div class="flex flex-wrap gap-2" id="mapLegend">
                <!-- Legend will be populated dynamically -->
              </div>
              
              <!-- Route Statistics -->
              <div id="routeStats" class="hidden glass-effect-light p-3 rounded-lg">
                <div class="flex items-center gap-4 text-sm">
                  <div class="flex items-center gap-2">
                    <i class="fas fa-road text-orange-400"></i>
                    <span class="text-gray-300">Total Distance:</span>
                    <span id="totalDistance" class="text-white font-semibold">Calculating...</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <i class="fas fa-clock text-blue-400"></i>
                    <span class="text-gray-300">Est. Drive Time:</span>
                    <span id="driveTime" class="text-white font-semibold">Calculating...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recommended Hotels -->
          <div class="glass-card p-6 rounded-2xl mb-6">
            <h4 class="text-xl font-bold text-orange-300 mb-4 flex items-center gap-2">
              <i class="fas fa-bed"></i>
              Recommended Hotels for Your Trip
            </h4>
            <div id="hotelRecommendations">
              <div class="flex items-center justify-center py-8">
                <div class="loading-spinner"></div>
                <span class="ml-3 text-gray-300">Analyzing your itinerary for hotel recommendations...</span>
              </div>
            </div>
          </div>

          <!-- Iceland Weather Information -->
          <div class="glass-card p-6 rounded-2xl mb-6">
            <h4 class="text-xl font-bold text-orange-300 mb-4 flex items-center gap-2">
              <i class="fas fa-cloud-sun"></i>
              Iceland Weather Information
            </h4>
            <div id="weatherContent">
              <div class="flex items-center justify-center py-8">
                <div class="loading-spinner"></div>
                <span class="ml-3 text-gray-300">Loading weather information...</span>
              </div>
            </div>
          </div>
          
          <!-- Action buttons -->
          <div class="flex flex-wrap gap-4 pt-6 border-t border-gray-600">
            <button onclick="window.print()" class="flex items-center gap-2 glass-effect-light hover:bg-gray-600/50 text-white px-6 py-3 rounded-lg transition-all duration-300 hover-lift">
              <i class="fas fa-print"></i>
              Print Itinerary
            </button>
            <button id="shareBtn" class="flex items-center gap-2 glass-effect-light hover:bg-gray-600/50 text-white px-6 py-3 rounded-lg transition-all duration-300 hover-lift">
              <i class="fas fa-share-alt"></i>
              Share Trip
            </button>
            <button id="downloadBtn" class="flex items-center gap-2 glass-effect-light hover:bg-gray-600/50 text-white px-6 py-3 rounded-lg transition-all duration-300 hover-lift">
              <i class="fas fa-download"></i>
              Download PDF
            </button>
            <button onclick="location.reload()" class="flex items-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-6 py-3 rounded-lg transition-all duration-300 hover-lift">
              <i class="fas fa-redo"></i>
              Plan Another Trip
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Why TourOn Beats Other Travel Planners -->
    <section class="py-20 px-6 page-section">
      <div class="section-divider"></div>
      
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <div class="glass-effect-light p-8 rounded-3xl hover-lift mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl mb-6 shadow-lg">
              <i class="fas fa-trophy text-2xl text-white"></i>
            </div>
            <h2 class="text-5xl font-bold mb-4 text-orange-300">Why TourOn Beats Other Travel Planners</h2>
            <p class="text-xl text-gray-200 max-w-3xl mx-auto">See why thousands choose TourOn over generic travel planning websites</p>
          </div>
        </div>

        <div class="glass-effect p-6 sm:p-10 rounded-3xl mb-12 hover-lift">
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-gray-600">
                  <th class="text-left py-4 px-2 text-orange-300 font-bold">Feature</th>
                  <th class="text-center py-4 px-2">
                    <div class="flex flex-col items-center">
                      <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center mb-2">
                        <i class="fas fa-mountain text-white"></i>
                      </div>
                      <span class="text-orange-300 font-bold">TourOn</span>
                    </div>
                  </th>
                  <th class="text-center py-4 px-2">
                    <div class="flex flex-col items-center">
                      <div class="w-12 h-12 bg-gray-600 rounded-xl flex items-center justify-center mb-2">
                        <i class="fas fa-plane text-gray-400"></i>
                      </div>
                      <span class="text-gray-400 font-bold">Other Planners</span>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody class="text-gray-300">
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Iceland Specialization</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-check-circle text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">100% Iceland Expert</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-times-circle text-2xl text-red-400"></i>
                    <div class="text-xs mt-1 text-red-300">Generic Global</div>
                  </td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Cost</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-check-circle text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Always Free</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-credit-card text-2xl text-yellow-400"></i>
                    <div class="text-xs mt-1 text-yellow-300">Premium Plans</div>
                  </td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Planning Speed</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-bolt text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Under 60 seconds</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-clock text-2xl text-yellow-400"></i>
                    <div class="text-xs mt-1 text-yellow-300">5-10 minutes</div>
                  </td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Personalization</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-heart text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Hyper-Personal</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-users text-2xl text-yellow-400"></i>
                    <div class="text-xs mt-1 text-yellow-300">Basic Preferences</div>
                  </td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Budget Integration</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-calculator text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Real Cost Estimates</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-question text-2xl text-red-400"></i>
                    <div class="text-xs mt-1 text-red-300">No Cost Info</div>
                  </td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="py-4 px-2 font-semibold">Weather Integration</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-cloud-sun text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Seasonal Tips</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-times text-2xl text-red-400"></i>
                    <div class="text-xs mt-1 text-red-300">No Weather Info</div>
                  </td>
                </tr>
                <tr>
                  <td class="py-4 px-2 font-semibold">Local Insider Tips</td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-gem text-2xl text-green-400"></i>
                    <div class="text-xs mt-1 text-green-300">Hidden Gems</div>
                  </td>
                  <td class="text-center py-4 px-2">
                    <i class="fas fa-map text-2xl text-yellow-400"></i>
                    <div class="text-xs mt-1 text-yellow-300">Tourist Spots</div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- User testimonial style section -->
        <div class="grid md:grid-cols-3 gap-6">
          <div class="glass-card p-6 rounded-2xl hover-lift">
            <div class="mb-4">
              <div class="flex text-orange-400 mb-2">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </div>
              <p class="text-gray-300 italic">"TourOn gave me an incredible Iceland itinerary in seconds. Way better than the generic stuff from other sites."</p>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center">
                <span class="text-white font-bold">S</span>
              </div>
              <div>
                <div class="font-semibold text-white">Sarah M.</div>
                <div class="text-xs text-gray-400">Solo Traveler</div>
              </div>
            </div>
          </div>
          
          <div class="glass-card p-6 rounded-2xl hover-lift">
            <div class="mb-4">
              <div class="flex text-orange-400 mb-2">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </div>
              <p class="text-gray-300 italic">"Free, fast, and incredibly detailed. TourOn saved me hours of research and gave me spots I never would have found."</p>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center">
                <span class="text-white font-bold">M</span>
              </div>
              <div>
                <div class="font-semibold text-white">Mike & Lisa</div>
                <div class="text-xs text-gray-400">Couple</div>
              </div>
            </div>
          </div>
          
          <div class="glass-card p-6 rounded-2xl hover-lift">
            <div class="mb-4">
              <div class="flex text-orange-400 mb-2">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </div>
              <p class="text-gray-300 italic">"The budget estimates and local tips made all the difference. This is what travel planning should be like."</p>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center">
                <span class="text-white font-bold">A</span>
              </div>
              <div>
                <div class="font-semibold text-white">Alex J.</div>
                <div class="text-xs text-gray-400">Adventure Seeker</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-16 px-6 page-section">
      <div class="floating-element w-3 h-3 top-10 left-10 opacity-20"></div>
      <div class="floating-element w-2 h-2 bottom-10 right-10 opacity-30"></div>
      
      <div class="max-w-4xl mx-auto">
        <div class="glass-effect p-8 rounded-2xl text-center hover-lift">
          <div class="mb-6">
            <div class="mb-4">
              <img src="touron_logo.png" alt="TourOn Logo" class="mx-auto h-16 w-auto opacity-90">
            </div>
            <h3 class="text-2xl font-bold text-orange-400 mb-2">TourOn</h3>
            <p class="text-gray-300">Your Iceland Adventure, Planned in Seconds</p>
            <p class="text-sm text-gray-400 mt-2">The smarter, faster, and free alternative to generic travel planners</p>
          </div>
          <div class="text-gray-400">
            <p>&copy; 2024 TourOn. Made with <i class="fas fa-heart text-red-500"></i> for Iceland adventurers.</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- JS Script -->
    <script>
      // Global variables for map functionality
      let map;
      let markers = [];
      let routeLines = [];
      let currentItinerary = '';
      let currentDestinations = [];
      let routeVisible = true;
      let currentMapStyle = 'dark';
      let isFullscreen = false;

      // Iceland destinations database with coordinates
      const icelandDestinations = {
        'reykjavik': { lat: 64.1466, lng: -21.9426, name: 'Reykjavik' },
        'blue lagoon': { lat: 63.8804, lng: -22.4495, name: 'Blue Lagoon' },
        'golden circle': { lat: 64.3271, lng: -20.1201, name: 'Golden Circle' },
        'geysir': { lat: 64.3107, lng: -20.3014, name: 'Geysir' },
        'gullfoss': { lat: 64.3271, lng: -20.1201, name: 'Gullfoss' },
        'thingvellir': { lat: 64.2559, lng: -21.1300, name: 'Thingvellir National Park' },
        'seljalandsfoss': { lat: 63.6158, lng: -19.9888, name: 'Seljalandsfoss' },
        'skogafoss': { lat: 63.5319, lng: -19.5118, name: 'Sk√≥gafoss' },
        'reynisfjara': { lat: 63.4040, lng: -19.0440, name: 'Reynisfjara Black Sand Beach' },
        'vik': { lat: 63.4186, lng: -19.0059, name: 'V√≠k' },
        'jokulsarlon': { lat: 64.0484, lng: -16.2306, name: 'J√∂kuls√°rl√≥n Glacier Lagoon' },
        'diamond beach': { lat: 64.0431, lng: -16.2247, name: 'Diamond Beach' },
        'hofn': { lat: 64.2539, lng: -15.2082, name: 'H√∂fn' },
        'eastfjords': { lat: 65.2627, lng: -14.4014, name: 'Eastfjords' },
        'egilsstadir': { lat: 65.2637, lng: -14.3944, name: 'Egilssta√∞ir' },
        'dettifoss': { lat: 65.8144, lng: -16.3860, name: 'Dettifoss' },
        'myvatn': { lat: 65.5904, lng: -16.9975, name: 'Lake M√Ωvatn' },
        'akureyri': { lat: 65.6835, lng: -18.1262, name: 'Akureyri' },
        'godafoss': { lat: 65.6827, lng: -17.5501, name: 'Go√∞afoss' },
        'husavik': { lat: 66.0449, lng: -17.3389, name: 'H√∫sav√≠k' },
        'westfjords': { lat: 65.6171, lng: -23.7329, name: 'Westfjords' },
        'snaefellsnes': { lat: 64.7512, lng: -23.7756, name: 'Sn√¶fellsnes Peninsula' },
        'kirkjufell': { lat: 64.9241, lng: -23.3117, name: 'Kirkjufell' },
        'stykkisholmur': { lat: 65.0743, lng: -22.7287, name: 'Stykkish√≥lmur' },
        'landmannalaugar': { lat: 63.9922, lng: -19.0568, name: 'Landmannalaugar' },
        'thorsmork': { lat: 63.6500, lng: -19.4667, name: '√û√≥rsm√∂rk' },
        'westman islands': { lat: 63.4040, lng: -20.2743, name: 'Westman Islands' },
        'keflavik': { lat: 63.9850, lng: -22.6056, name: 'Keflav√≠k' },
        'northern lights': { lat: 64.1466, lng: -21.9426, name: 'Northern Lights Viewing' },
        'glacier hiking': { lat: 64.0484, lng: -16.2306, name: 'Glacier Hiking' },
        'whale watching': { lat: 66.0449, lng: -17.3389, name: 'Whale Watching' },
        'hot springs': { lat: 63.8804, lng: -22.4495, name: 'Hot Springs' }
      };

      // Extract destinations from itinerary text
      function extractDestinations(itineraryText) {
        const foundDestinations = [];
        const itineraryLower = itineraryText.toLowerCase();
        
        // Look for destinations in the itinerary text
        Object.keys(icelandDestinations).forEach(key => {
          if (itineraryLower.includes(key) || itineraryLower.includes(icelandDestinations[key].name.toLowerCase())) {
            foundDestinations.push(icelandDestinations[key]);
          }
        });

        // Remove duplicates based on coordinates
        const uniqueDestinations = foundDestinations.filter((dest, index, self) => 
          index === self.findIndex(d => d.lat === dest.lat && d.lng === dest.lng)
        );

        return uniqueDestinations;
      }

      // Create custom map with route using Leaflet
      function createPersonalizedMap(destinations) {
        console.log('Creating map with destinations:', destinations);
        
        try {
          // Clear existing map if it exists
          if (map) {
            map.remove();
            map = null;
          }

          // Clear the loading state
          const mapContainer = document.getElementById('customMap');
          
          // If no destinations found, show fallback
          if (!destinations || destinations.length === 0) {
            console.log('No destinations found, showing fallback map');
            mapContainer.innerHTML = `
              <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1669775.7942266634!2d-21.89619!3d64.96305!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48d674b9eedcedc3%3A0xec912ca230d26071!2sIceland!5e0!3m2!1sen!2sus!4v1677123456789!5m2!1sen!2sus"
                width="100%" 
                height="100%" 
                style="border:0; border-radius: 12px;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            `;
            createMapLegend([]);
            return;
          }

          // Clear the container and prepare for Leaflet
          mapContainer.innerHTML = '';

          // Check if Leaflet is loaded
          if (typeof L === 'undefined') {
            console.error('Leaflet library not loaded');
            mapContainer.innerHTML = `
              <div class="flex items-center justify-center h-full text-center">
                <div>
                  <i class="fas fa-exclamation-triangle text-yellow-400 text-4xl mb-4"></i>
                  <p class="text-white">Map library failed to load</p>
                  <p class="text-gray-400 text-sm">Please refresh the page</p>
                </div>
              </div>
            `;
            return;
          }

          // Initialize Leaflet map
          console.log('Initializing Leaflet map');
          map = L.map('customMap', {
            zoomControl: true,
            scrollWheelZoom: true,
            dragging: true,
            touchZoom: true,
            doubleClickZoom: true
          }).setView([64.9631, -19.0208], 6);

          // Add tile layer with error handling
          const tileLayer = L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
          });

          // Fallback to OpenStreetMap if Stadia Maps fails
          tileLayer.on('tileerror', function(e) {
            console.log('Stadia Maps failed, switching to OpenStreetMap');
            map.removeLayer(tileLayer);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 18,
              attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
            }).addTo(map);
          });

          tileLayer.addTo(map);

          // Clear existing markers and routes
          markers = [];
          routeLines = [];

          // Add markers for each destination
          destinations.forEach((dest, index) => {
            const color = index === 0 ? '#10b981' : index === destinations.length - 1 ? '#ef4444' : '#f97316';
            
            console.log(`Adding marker for ${dest.name} at ${dest.lat}, ${dest.lng}`);
            
            // Create custom marker
            const marker = L.circleMarker([dest.lat, dest.lng], {
              color: '#ffffff',
              weight: 3,
              fillColor: color,
              fillOpacity: 1,
              radius: 10
            }).addTo(map);

            // Add popup
            marker.bindPopup(`
              <div style="color: #1f2937; font-weight: 600; padding: 8px; min-width: 150px;">
                <strong style="font-size: 14px;">${dest.name}</strong><br>
                <small style="color: #6b7280;">
                  ${index === 0 ? 'Starting point' : index === destinations.length - 1 ? 'Final destination' : `Stop ${index}`}
                </small>
              </div>
            `);

            markers.push(marker);
          });

          // Create route lines between destinations
          if (destinations.length > 1) {
            for (let i = 0; i < destinations.length - 1; i++) {
              const routeLine = L.polyline([
                [destinations[i].lat, destinations[i].lng],
                [destinations[i + 1].lat, destinations[i + 1].lng]
              ], {
                color: '#f97316',
                weight: 4,
                opacity: 0.8,
                dashArray: '10, 5'
              }).addTo(map);
              
              routeLines.push(routeLine);
            }
          }

          // Fit map to show all destinations
          if (destinations.length > 0) {
            const group = new L.featureGroup(markers);
            map.fitBounds(group.getBounds().pad(0.1));
          }

          // Store current destinations for interactive features
          currentDestinations = destinations;
          
          // Create legend
          createMapLegend(destinations);
          
          // Calculate and display route statistics
          if (destinations.length > 1) {
            calculateRouteStats(destinations);
          }
          
          // Set up interactive controls
          setupMapControls();
          
          console.log('Map created successfully');

        } catch (error) {
          console.error('Error creating map:', error);
          document.getElementById('customMap').innerHTML = `
            <div class="flex items-center justify-center h-full text-center">
              <div>
                <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-4"></i>
                <p class="text-white">Failed to create map</p>
                <p class="text-gray-400 text-sm">Error: ${error.message}</p>
              </div>
            </div>
          `;
          createMapLegend([]);
        }
      }

      // Create interactive map legend
      function createMapLegend(destinations) {
        const legend = document.getElementById('mapLegend');
        legend.innerHTML = '';

        if (destinations.length === 0) {
          legend.innerHTML = `
            <div class="glass-effect-light px-3 py-2 rounded-lg text-sm text-gray-400">
              <i class="fas fa-info-circle mr-1"></i>
              General Iceland map - destinations will appear when itinerary is generated
            </div>
          `;
          return;
        }

        // Add interactive legend items
        destinations.forEach((dest, index) => {
          const legendItem = document.createElement('div');
          legendItem.className = 'flex items-center gap-2 glass-effect-light hover:bg-orange-500/20 px-3 py-2 rounded-lg text-sm cursor-pointer transition-all duration-300 group';
          legendItem.dataset.index = index;
          legendItem.innerHTML = `
            <div class="w-3 h-3 rounded-full border-2 border-white transition-transform duration-300 group-hover:scale-125" style="background-color: ${
              index === 0 ? '#10b981' : index === destinations.length - 1 ? '#ef4444' : '#f97316'
            }"></div>
            <span class="text-white group-hover:text-orange-200 transition-colors duration-300">${dest.name}</span>
            <span class="text-gray-400 text-xs group-hover:text-gray-300 transition-colors duration-300">
              ${index === 0 ? 'Start' : index === destinations.length - 1 ? 'End' : `Stop ${index}`}
            </span>
            <i class="fas fa-crosshairs text-gray-500 group-hover:text-orange-300 ml-auto transition-colors duration-300"></i>
          `;
          
          // Add click handler to zoom to destination
          legendItem.addEventListener('click', () => {
            zoomToDestination(dest, index);
          });
          
          legend.appendChild(legendItem);
        });

        // Add route info with interactive toggle
        if (destinations.length > 1) {
          const routeInfo = document.createElement('div');
          routeInfo.className = 'glass-effect-light px-3 py-2 rounded-lg text-sm text-orange-300';
          routeInfo.innerHTML = `
            <div class="flex items-center justify-between">
              <span>
                <i class="fas fa-route mr-1"></i>
                ${destinations.length} destinations ‚Ä¢ Suggested route
              </span>
              <span class="text-xs text-gray-400">Click destinations to focus</span>
            </div>
          `;
          legend.appendChild(routeInfo);
        }
      }

      // Zoom to specific destination with animation
      function zoomToDestination(destination, index) {
        if (!map || !markers[index]) return;
        
        // Animate to destination
        map.flyTo([destination.lat, destination.lng], 10, {
          duration: 1.5,
          easeLinearity: 0.25
        });
        
        // Highlight marker temporarily
        const marker = markers[index];
        const originalRadius = marker.options.radius;
        
        // Pulse animation
        let pulseCount = 0;
        const pulseInterval = setInterval(() => {
          marker.setRadius(pulseCount % 2 === 0 ? originalRadius * 1.5 : originalRadius);
          pulseCount++;
          if (pulseCount >= 6) {
            clearInterval(pulseInterval);
            marker.setRadius(originalRadius);
          }
        }, 200);
        
        // Open popup
        setTimeout(() => {
          marker.openPopup();
        }, 1500);
      }

      // Calculate route statistics
      function calculateRouteStats(destinations) {
        if (destinations.length < 2) return;
        
        let totalDistance = 0;
        
        // Calculate approximate distances between consecutive destinations
        for (let i = 0; i < destinations.length - 1; i++) {
          const dist = calculateDistance(
            destinations[i].lat, destinations[i].lng,
            destinations[i + 1].lat, destinations[i + 1].lng
          );
          totalDistance += dist;
        }
        
        // Estimate driving time (assuming average speed of 60 km/h on Iceland roads)
        const driveTimeHours = totalDistance / 60;
        const hours = Math.floor(driveTimeHours);
        const minutes = Math.round((driveTimeHours - hours) * 60);
        
        // Display statistics with animation
        document.getElementById('totalDistance').textContent = `${Math.round(totalDistance)} km`;
        document.getElementById('driveTime').textContent = `${hours}h ${minutes}m`;
        const routeStats = document.getElementById('routeStats');
        routeStats.classList.remove('hidden');
        routeStats.classList.add('route-stats-enter');
      }

      // Calculate distance between two points (Haversine formula)
      function calculateDistance(lat1, lon1, lat2, lon2) {
        const R = 6371; // Earth's radius in kilometers
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                  Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                  Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
      }

      // Setup interactive map controls
      function setupMapControls() {
        // Fit map button
        document.getElementById('fitMapBtn').addEventListener('click', () => {
          if (map && markers.length > 0) {
            const group = new L.featureGroup(markers);
            map.flyToBounds(group.getBounds().pad(0.1), {
              duration: 1.5
            });
          }
        });

        // Show/hide route button
        document.getElementById('showRouteBtn').addEventListener('click', () => {
          toggleRoute();
        });

        // Map style button
        document.getElementById('mapStyleBtn').addEventListener('click', () => {
          switchMapStyle();
        });

        // Fullscreen button
        document.getElementById('fullscreenBtn').addEventListener('click', () => {
          toggleFullscreen();
        });
      }

      // Toggle route visibility
      function toggleRoute() {
        const button = document.getElementById('showRouteBtn');
        const buttonText = button.querySelector('span');
        
        routeLines.forEach(line => {
          if (routeVisible) {
            line.setStyle({ opacity: 0 });
          } else {
            line.setStyle({ opacity: 0.8 });
          }
        });
        
        routeVisible = !routeVisible;
        buttonText.textContent = routeVisible ? 'Hide Route' : 'Show Route';
        button.className = routeVisible ? 
          'glass-effect-light hover:bg-red-500/20 text-red-300 hover:text-red-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2' :
          'glass-effect-light hover:bg-blue-500/20 text-blue-300 hover:text-blue-200 px-3 py-2 rounded-lg text-sm transition-all duration-300 flex items-center gap-2';
      }

      // Switch map style
      function switchMapStyle() {
        if (!map) return;
        
        // Remove existing tile layers
        map.eachLayer(layer => {
          if (layer instanceof L.TileLayer) {
            map.removeLayer(layer);
          }
        });
        
        let tileLayer;
        const button = document.getElementById('mapStyleBtn');
        
        if (currentMapStyle === 'dark') {
          // Switch to satellite view
          tileLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="https://www.esri.com/">Esri</a>, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community'
          });
          currentMapStyle = 'satellite';
          button.innerHTML = '<i class="fas fa-map"></i> Street View';
        } else if (currentMapStyle === 'satellite') {
          // Switch to street view
          tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
          });
          currentMapStyle = 'street';
          button.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
        } else {
          // Switch back to dark
          tileLayer = L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
          });
          currentMapStyle = 'dark';
          button.innerHTML = '<i class="fas fa-satellite"></i> Satellite';
        }
        
        tileLayer.addTo(map);
      }

      // Toggle fullscreen mode
      function toggleFullscreen() {
        const mapContainer = document.getElementById('customMap').parentElement.parentElement;
        const button = document.getElementById('fullscreenBtn');
        
        if (!isFullscreen) {
          // Enter fullscreen
          mapContainer.style.position = 'fixed';
          mapContainer.style.top = '0';
          mapContainer.style.left = '0';
          mapContainer.style.width = '100vw';
          mapContainer.style.height = '100vh';
          mapContainer.style.zIndex = '9999';
          mapContainer.style.background = 'rgba(15, 23, 42, 0.95)';
          mapContainer.style.backdropFilter = 'blur(10px)';
          
          document.getElementById('customMap').style.height = 'calc(100vh - 200px)';
          button.innerHTML = '<i class="fas fa-compress"></i> Exit Fullscreen';
          
          // Invalidate map size after transition
          setTimeout(() => {
            if (map) map.invalidateSize();
          }, 300);
          
        } else {
          // Exit fullscreen
          mapContainer.style.position = '';
          mapContainer.style.top = '';
          mapContainer.style.left = '';
          mapContainer.style.width = '';
          mapContainer.style.height = '';
          mapContainer.style.zIndex = '';
          mapContainer.style.background = '';
          mapContainer.style.backdropFilter = '';
          
          document.getElementById('customMap').style.height = '450px';
          button.innerHTML = '<i class="fas fa-expand"></i> Fullscreen';
          
          // Invalidate map size after transition
          setTimeout(() => {
            if (map) map.invalidateSize();
          }, 300);
        }
        
        isFullscreen = !isFullscreen;
      }
    </script>

    <script>
      // Check if background image loads
      document.addEventListener('DOMContentLoaded', function() {
        const img = new Image();
        img.onload = function() {
          console.log('Background image loaded successfully');
        };
        img.onerror = function() {
          console.log('Background image failed to load');
          document.body.classList.add('no-bg-image');
        };
        img.src = 'background_northern_lights.jpg';
        
        // Initialize map with no destinations (will show fallback)
        setTimeout(() => {
          createPersonalizedMap([]);
        }, 1000);
      });

      // Initialize Flatpickr calendar
      document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#dates", {
          mode: "range",
          dateFormat: "M j, Y",
          minDate: "today",
          showMonths: 2,
          monthSelectorType: "static",
          locale: {
            rangeSeparator: " ‚Üí "
          },
          onReady: function(selectedDates, dateStr, instance) {
            // Add custom styling after calendar is ready
            const calendar = instance.calendarContainer;
            calendar.style.fontFamily = 'Inter, sans-serif';
          },
          onOpen: function() {
            // Add calendar-open class when calendar opens
            document.body.classList.add('calendar-open');
          },
          onClose: function() {
            // Remove calendar-open class when calendar closes
            document.body.classList.remove('calendar-open');
          },
          onChange: function(selectedDates, dateStr, instance) {
            if (selectedDates.length === 2) {
              const startDate = selectedDates[0];
              const endDate = selectedDates[1];
              const diffTime = Math.abs(endDate - startDate);
              const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
              
              // Show trip duration
              const durationElement = document.getElementById('tripDuration');
              if (durationElement) {
                durationElement.remove();
              }
              
              const durationText = document.createElement('p');
              durationText.id = 'tripDuration';
              durationText.className = 'text-sm text-orange-300 mt-2';
              durationText.innerHTML = `<i class="fas fa-clock mr-1"></i>Trip duration: ${diffDays} days`;
              
              const dateInput = document.getElementById('dates');
              dateInput.parentNode.appendChild(durationText);
              
              // Close calendar after date selection (optional for better UX)
              if (selectedDates.length === 2) {
                setTimeout(() => {
                  instance.close();
                }, 500);
              }
            }
          }
        });
      });

      document.getElementById('tripForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        // Show loading state
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const loadingSpinner = document.getElementById('loadingSpinner');
        
        btnText.classList.add('hidden');
        loadingSpinner.classList.remove('hidden');
        submitBtn.disabled = true;
        submitBtn.classList.add('opacity-75', 'cursor-not-allowed');

        // Collect enhanced form data
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const dates = document.getElementById('dates').value;
        const pace = document.querySelector('input[name="pace"]:checked').value;
        const budget = document.querySelector('input[name="budget"]:checked').value;
        const groupSize = document.getElementById('groupSize').value;
        const specialRequests = document.getElementById('specialRequests').value;
        const interests = Array.from(document.querySelectorAll('input[name="interests"]:checked')).map((el) => el.value);

        try {
          const response = await fetch('/.netlify/functions/generateTrip', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
              name, 
              email, 
              dates, 
              pace, 
              budget, 
              groupSize, 
              specialRequests, 
              interests 
            }),
          });

          const data = await response.json();
          const itinerary = data.itinerary || "Something went wrong.";
          document.getElementById('outputText').textContent = itinerary;
          
          // Store current itinerary for map processing
          currentItinerary = itinerary;
          
          // Calculate and display cost estimate
          const costEstimate = calculateCostEstimate(budget, dates, groupSize);
          document.getElementById('costEstimate').textContent = costEstimate;
          
          // Extract destinations and create personalized map
          setTimeout(() => {
            const destinations = extractDestinations(itinerary);
            console.log('Extracted destinations:', destinations);
            createPersonalizedMap(destinations);
          }, 500);
          
          // Smooth scroll to results
          document.getElementById('itineraryOutput').classList.remove('hidden');
          document.getElementById('itineraryOutput').scrollIntoView({ behavior: 'smooth' });
          
          // Load weather data automatically when itinerary is shown
          loadWeatherData();

          // Generate hotel recommendations
          setTimeout(() => {
            const userInputs = {
              budget: document.querySelector('input[name="budget"]:checked')?.value || 'Mid-Range',
              groupSize: document.getElementById('groupSize').value,
              dates: document.getElementById('dates').value,
              duration: calculateTripDuration()
            };
            console.log('User inputs for hotels:', userInputs);
            generateHotelRecommendations(data.itinerary, userInputs);
          }, 1000);
          
        } catch (error) {
          console.error('Error:', error);
          document.getElementById('outputText').textContent = "Sorry, there was an error generating your trip. Please try again.";
          
          // Show fallback map on error
          setTimeout(() => {
            createPersonalizedMap([]);
          }, 500);
          
          document.getElementById('itineraryOutput').classList.remove('hidden');
        } finally {
          // Reset button state
          btnText.classList.remove('hidden');
          loadingSpinner.classList.add('hidden');
          submitBtn.disabled = false;
          submitBtn.classList.remove('opacity-75', 'cursor-not-allowed');
        }
      });

      // Calculate trip duration from dates
      function calculateTripDuration() {
        const datesInput = document.getElementById('dates');
        if (!datesInput || !datesInput.value || !datesInput.value.includes('‚Üí')) {
          return 3; // Default duration
        }
        
        const dateRange = datesInput.value.split(' ‚Üí ');
        const startDate = new Date(dateRange[0]);
        const endDate = new Date(dateRange[1]);
        return Math.max(1, Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)));
      }

      // Cost estimation function
      function calculateCostEstimate(budget, dates, groupSize) {
        if (!dates || !dates.includes('‚Üí')) return 'Not calculated';
        
        const dateRange = dates.split(' ‚Üí ');
        const startDate = new Date(dateRange[0]);
        const endDate = new Date(dateRange[1]);
        const days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
        
        const groupMultiplier = groupSize.includes('Solo') ? 1 : 
                              groupSize.includes('Couple') ? 2 : 
                              groupSize.includes('Family') ? 3.5 : 
                              groupSize.includes('friends') ? 4 : 6;
        
        let dailyBudget;
        switch(budget) {
          case 'Budget-Friendly':
            dailyBudget = 80;
            break;
          case 'Luxury':
            dailyBudget = 250;
            break;
          default:
            dailyBudget = 150;
        }
        
        const totalCost = Math.round(dailyBudget * days * groupMultiplier);
        return `$${totalCost.toLocaleString()} USD`;
      }

      // Enhanced button functionality
      document.addEventListener('DOMContentLoaded', function() {
        // Share button
        document.addEventListener('click', function(e) {
          if (e.target.id === 'shareBtn' || e.target.closest('#shareBtn')) {
            if (navigator.share) {
              navigator.share({
                title: 'My Iceland Adventure Itinerary',
                text: 'Check out my personalized Iceland trip planned with TourOn!',
                url: window.location.href
              });
            } else {
              navigator.clipboard.writeText(window.location.href);
              alert('Link copied to clipboard!');
            }
          }
        });

        // Download button (simplified - just prints for now)
        document.addEventListener('click', function(e) {
          if (e.target.id === 'downloadBtn' || e.target.closest('#downloadBtn')) {
            window.print();
          }
        });
      });

      // Enhanced weather data loading function
      async function loadWeatherData() {
        const weatherContent = document.getElementById('weatherContent');
        
        // Show loading state
        weatherContent.innerHTML = `
          <div class="flex items-center justify-center py-8">
            <div class="loading-spinner"></div>
            <span class="ml-3 text-gray-300">Loading comprehensive weather data...</span>
          </div>
        `;
        
        try {
          // Get travel dates if available
          const travelDates = getTravelDates();
          
          // Fetch multiple weather data sources
          const [currentWeather, forecastData] = await Promise.all([
            fetchCurrentWeather(),
            fetchWeatherForecast(travelDates)
          ]);
          
          let weatherHTML = `
            <div class="space-y-6">
              <!-- Current Weather Section -->
              <div class="glass-card p-6 rounded-xl">
                <div class="flex items-center justify-between mb-4">
                  <h4 class="text-xl font-bold text-orange-300 flex items-center gap-2">
                    <i class="fas fa-thermometer-half"></i>
                    Typical Current Weather in Iceland
                  </h4>
                  <span class="text-xs text-gray-400">${new Date().toLocaleString()}</span>
                </div>
                ${currentWeather}
              </div>
          `;
          
          // Add travel forecast if dates are available
          if (travelDates.hasValidDates && forecastData) {
            weatherHTML += `
              <!-- Travel Forecast Section -->
              <div class="glass-card p-6 rounded-xl">
                <h4 class="text-xl font-bold text-blue-300 mb-4 flex items-center gap-2">
                  <i class="fas fa-calendar-alt"></i>
                  Weather Forecast for Your Trip
                  <span class="text-sm text-gray-400 font-normal">(${travelDates.startDate} - ${travelDates.endDate})</span>
                </h4>
                ${forecastData}
              </div>
            `;
          }
          
          weatherHTML += `
              <!-- Travel Tips Section -->
              <div class="glass-card p-6 rounded-xl">
                <h5 class="font-semibold text-orange-300 mb-4 flex items-center gap-2">
                  <i class="fas fa-lightbulb"></i>
                  Smart Travel Tips for Iceland Weather
                </h5>
                ${generateWeatherTips(travelDates)}
              </div>
              
              <!-- Alternative Sources -->
              <div class="glass-card p-4 rounded-xl">
                <h6 class="font-semibold text-gray-300 mb-3 text-sm">Additional Weather Resources:</h6>
                <div class="grid md:grid-cols-3 gap-3 text-sm">
                  <a href="https://en.vedur.is/" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors">
                    <i class="fas fa-external-link-alt"></i>
                    Icelandic Met Office
                  </a>
                  <a href="https://www.yr.no/en/forecast/country/Iceland" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors">
                    <i class="fas fa-external-link-alt"></i>
                    YR.no Forecast
                  </a>
                  <a href="https://www.windy.com/?64.146,-21.942,5" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors">
                    <i class="fas fa-external-link-alt"></i>
                    Windy.com
                  </a>
                </div>
              </div>
              
              <div class="text-center text-xs text-gray-500">
                Based on seasonal weather patterns and typical conditions ‚Ä¢ For real-time data visit vedur.is
              </div>
            </div>
          `;
          
          weatherContent.innerHTML = weatherHTML;
          
        } catch (error) {
          console.error('Weather data error:', error);
          showWeatherError(weatherContent);
        }
      }

      // Generate hotel recommendations based on itinerary
      async function generateHotelRecommendations(itinerary, userInputs) {
        const hotelContainer = document.getElementById('hotelRecommendations');
        if (!hotelContainer) return;

        try {
          console.log('Generating hotel recommendations...');
          console.log('Itinerary text:', itinerary);
          console.log('User inputs:', userInputs);
          
          // Extract destinations from itinerary
          const destinations = extractDestinationsFromItinerary(itinerary);
          const budget = userInputs.budget || 'Mid-Range';
          const groupSize = userInputs.groupSize || 'Couple';
          const duration = userInputs.duration || 3;
          
          console.log('Extracted destinations:', destinations);
          console.log('Budget:', budget, 'Group:', groupSize, 'Duration:', duration);
          
          // Get hotel recommendations based on route and preferences
          const recommendations = getHotelRecommendations(destinations, budget, groupSize, duration);
          console.log('Generated recommendations:', recommendations);
          
          if (!recommendations || recommendations.length === 0) {
            throw new Error('No hotel recommendations generated');
          }
          
          let hotelHTML = `
            <div class="mb-4">
              <p class="text-sm text-gray-300 mb-4">Based on your ${duration}-day itinerary and ${budget.toLowerCase()} budget, here are our top hotel recommendations:</p>
            </div>
            
                         <div class="grid sm:grid-cols-1 lg:grid-cols-2 gap-4">
           `;
           
           recommendations.forEach((hotel, index) => {
            const bookingUrl = generateBookingUrl(hotel, userInputs);
            
            hotelHTML += `
              <div class="glass-effect-light p-5 rounded-xl hover-subtle transition-all duration-300 hover:border-orange-400/30">
                <div class="flex items-start justify-between mb-3">
                  <div class="flex-1">
                    <h5 class="font-bold text-white text-lg mb-1">${hotel.name}</h5>
                    <div class="flex items-center gap-2 mb-2">
                      <i class="fas fa-map-marker-alt text-orange-400 text-sm"></i>
                      <span class="text-gray-300 text-sm">${hotel.location}</span>
                    </div>
                    <div class="flex items-center gap-2 mb-3">
                      <div class="flex text-yellow-400">
                        ${generateStarRating(hotel.rating)}
                      </div>
                      <span class="text-sm text-gray-400">${hotel.rating}/5 (${hotel.reviews} reviews)</span>
                    </div>
                  </div>
                  <div class="text-right">
                    <div class="text-lg font-bold text-green-400">${hotel.priceRange}</div>
                    <div class="text-xs text-gray-400">per night</div>
                  </div>
                </div>
                
                <div class="mb-4">
                  <p class="text-sm text-gray-300 mb-3">${hotel.description}</p>
                  <div class="flex flex-wrap gap-2">
                    ${hotel.amenities.map(amenity => `
                      <span class="text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full">
                        <i class="fas ${amenity.icon} mr-1"></i>${amenity.name}
                      </span>
                    `).join('')}
                  </div>
                </div>
                
                <div class="flex items-center justify-between">
                  <div class="text-xs text-gray-400">
                    <i class="fas fa-info-circle mr-1"></i>
                    ${hotel.whyRecommended}
                  </div>
                  <a href="${bookingUrl}" target="_blank" 
                     class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-300 hover-lift flex items-center gap-2">
                    <i class="fas fa-external-link-alt"></i>
                    Book on Booking.com
                  </a>
                </div>
              </div>
            `;
          });
          
          hotelHTML += `
            </div>
            
            <div class="mt-6 p-4 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-lg">
              <h6 class="font-semibold text-white mb-3 flex items-center gap-2">
                <i class="fas fa-lightbulb text-yellow-400"></i>
                Hotel Booking Tips for Iceland
              </h6>
              <div class="grid md:grid-cols-2 gap-3 text-sm text-gray-300">
                <div class="space-y-2">
                  <p><strong>Best Time to Book:</strong> 2-3 months in advance for summer</p>
                  <p><strong>Cancellation:</strong> Choose free cancellation options</p>
                </div>
                <div class="space-y-2">
                  <p><strong>Location:</strong> Stay near your planned activities</p>
                  <p><strong>Amenities:</strong> Look for breakfast included and parking</p>
                </div>
              </div>
            </div>
            
            <div class="text-center text-xs text-gray-500 mt-4">
              Hotel recommendations based on your itinerary ‚Ä¢ Prices may vary ‚Ä¢ Book directly for best rates
            </div>
          `;
          
          hotelContainer.innerHTML = hotelHTML;
          
        } catch (error) {
          console.error('Hotel recommendation error:', error);
          showHotelError(hotelContainer);
        }
      }

      // Get travel dates from the form
      function getTravelDates() {
        const datesInput = document.getElementById('dates');
        if (!datesInput || !datesInput.value || !datesInput.value.includes('‚Üí')) {
          return { hasValidDates: false };
        }
        
        const dateRange = datesInput.value.split(' ‚Üí ');
        const startDate = new Date(dateRange[0]);
        const endDate = new Date(dateRange[1]);
        
        return {
          hasValidDates: true,
          startDate: startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
          endDate: endDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
          startDateObj: startDate,
          endDateObj: endDate,
          duration: Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24))
        };
      }

      // Fetch current weather from multiple sources
      async function fetchCurrentWeather() {
        try {
          // Try Icelandic Met Office first with better error handling
          console.log('Fetching weather from Icelandic Met Office...');
          const response = await fetch('https://apis.is/weather/observations/en', {
            method: 'GET',
            headers: {
              'Accept': 'application/json',
            },
            mode: 'cors'
          });
          
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          
          const data = await response.json();
          console.log('Weather API response:', data);
          
          if (data.results && Array.isArray(data.results) && data.results.length > 0) {
            console.log('Successfully fetched weather data');
            return formatCurrentWeather(data.results);
          } else {
            throw new Error('No weather data in response');
          }
        } catch (error) {
          console.error('Weather API failed:', error);
          
          // Try alternative approach with sample data
          try {
            return await generateRealisticWeatherData();
          } catch (fallbackError) {
            console.log('Fallback weather generation failed, using static data');
            return generateFallbackCurrentWeather();
          }
        }
      }

      // Generate realistic weather data based on current season
      async function generateRealisticWeatherData() {
        const currentMonth = new Date().getMonth();
        const season = getSeason(currentMonth);
        
        // Generate realistic weather data for different Iceland locations
        const locations = [
          { name: 'Reykjavik', baseTemp: getSeasonalTemp(season), region: 'southwest' },
          { name: 'Akureyri', baseTemp: getSeasonalTemp(season) - 2, region: 'north' },
          { name: 'Egilssta√∞ir', baseTemp: getSeasonalTemp(season) - 1, region: 'east' },
          { name: 'H√∂fn', baseTemp: getSeasonalTemp(season) + 1, region: 'southeast' },
          { name: '√çsafj√∂r√∞ur', baseTemp: getSeasonalTemp(season) - 3, region: 'westfjords' },
          { name: 'V√≠k', baseTemp: getSeasonalTemp(season), region: 'south' }
        ];
        
        const weatherData = locations.map(location => ({
          name: location.name,
          T: Math.round(location.baseTemp + (Math.random() * 4 - 2)), // ¬±2¬∞C variation, rounded
          F: Math.round(Math.random() * 10 + 5), // 5-15 m/s wind, rounded
          D: Math.round(Math.random() * 360), // Wind direction, rounded
          R: Math.round((season === 'Summer' ? Math.random() * 2 : Math.random() * 5) * 10) / 10 // Rain to 1 decimal
        }));
        
        return formatCurrentWeather(weatherData);
      }

      // Get seasonal base temperature for Iceland
      function getSeasonalTemp(season) {
        const temps = {
          'Winter': 0,
          'Spring': 5,
          'Summer': 12,
          'Autumn': 6
        };
        return temps[season] || 8;
      }

      // Format current weather data
      function formatCurrentWeather(stations) {
        // Get key stations for different regions
        const keyStations = stations.slice(0, 6);
        
        let html = `
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
        `;
        
        keyStations.forEach(station => {
          const temp = station.T ? `${Math.round(station.T)}¬∞C` : 'N/A';
          const windSpeed = station.F ? `${Math.round(station.F)} m/s` : 'N/A';
          const windDirection = station.D ? `${Math.round(station.D)}¬∞` : 'N/A';
          const condition = getWeatherCondition(station);
          
          html += `
            <div class="glass-effect-light p-4 rounded-lg hover-subtle">
              <div class="flex items-center justify-between mb-3">
                <h6 class="font-semibold text-white text-sm">${station.name}</h6>
                <i class="fas ${condition.icon} text-${condition.color} text-lg"></i>
              </div>
              <div class="space-y-2 text-xs">
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Temperature:</span>
                  <span class="text-orange-300 font-semibold">${temp}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Wind:</span>
                  <span class="text-blue-300">${windSpeed}</span>
                </div>
                ${station.R ? `
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Rain:</span>
                  <span class="text-cyan-300">${Math.round(station.R * 10) / 10} mm</span>
                </div>
                ` : ''}
              </div>
            </div>
          `;
        });
        
        html += `</div>`;
        return html;
      }

      // Get weather condition icon and color
      function getWeatherCondition(station) {
        const temp = station.T || 0;
        const wind = station.F || 0;
        const rain = station.R || 0;
        
        if (rain > 0) return { icon: 'fa-cloud-rain', color: 'blue-400' };
        if (wind > 15) return { icon: 'fa-wind', color: 'gray-400' };
        if (temp < 0) return { icon: 'fa-snowflake', color: 'cyan-400' };
        if (temp > 15) return { icon: 'fa-sun', color: 'yellow-400' };
        return { icon: 'fa-cloud', color: 'gray-300' };
      }

      // Fetch weather forecast for travel dates
      async function fetchWeatherForecast(travelDates) {
        if (!travelDates.hasValidDates) return null;
        
        try {
          // Try OpenWeatherMap API (you'd need an API key for production)
          // For now, we'll generate a realistic forecast based on season and current conditions
          return generateSeasonalForecast(travelDates);
        } catch (error) {
          console.log('Forecast API failed, generating seasonal forecast');
          return generateSeasonalForecast(travelDates);
        }
      }

      // Generate seasonal forecast based on Iceland weather patterns
      function generateSeasonalForecast(travelDates) {
        const month = travelDates.startDateObj.getMonth();
        const season = getSeason(month);
        const forecast = getSeasonalWeatherPattern(season);
        
        let html = `
          <div class="mb-4 p-4 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-lg">
            <div class="flex items-center gap-3 mb-2">
              <i class="fas ${forecast.icon} text-2xl text-${forecast.color}"></i>
              <div>
                <h5 class="font-semibold text-white">${season} in Iceland</h5>
                <p class="text-sm text-gray-300">${forecast.description}</p>
              </div>
            </div>
          </div>
          
          <div class="grid md:grid-cols-2 gap-4">
            <div class="space-y-3">
              <h6 class="font-semibold text-white text-sm mb-3">Expected Conditions:</h6>
              <div class="space-y-2 text-sm">
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Temperature Range:</span>
                  <span class="text-orange-300 font-semibold">${forecast.tempRange}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Daylight Hours:</span>
                  <span class="text-yellow-300">${forecast.daylight}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Precipitation:</span>
                  <span class="text-blue-300">${forecast.precipitation}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Wind:</span>
                  <span class="text-gray-300">${forecast.wind}</span>
                </div>
              </div>
            </div>
            
            <div class="space-y-3">
              <h6 class="font-semibold text-white text-sm mb-3">What to Pack:</h6>
              <div class="space-y-1 text-sm text-gray-300">
                ${forecast.packingList.map(item => `
                  <div class="flex items-center gap-2">
                    <i class="fas fa-check text-green-400 text-xs"></i>
                    <span>${item}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        `;
        
        return html;
      }

      // Get season from month (0-based months in JavaScript)
      function getSeason(month) {
        if (month === 11 || month === 0 || month === 1) return 'Winter'; // Dec, Jan, Feb
        if (month >= 2 && month <= 4) return 'Spring'; // Mar, Apr, May
        if (month >= 5 && month <= 7) return 'Summer'; // Jun, Jul, Aug
        return 'Autumn'; // Sep, Oct, Nov
      }

      // Get seasonal weather patterns for Iceland
      function getSeasonalWeatherPattern(season) {
        const patterns = {
          'Winter': {
            icon: 'fa-snowflake',
            color: 'cyan-400',
            description: 'Cold, dark, and potentially snowy with Northern Lights opportunities',
            tempRange: '-5¬∞C to 5¬∞C',
            daylight: '4-6 hours',
            precipitation: 'Snow/rain likely',
            wind: 'Strong winds common',
            packingList: ['Heavy winter coat', 'Thermal layers', 'Waterproof boots', 'Warm hat & gloves', 'Crampons for ice']
          },
          'Spring': {
            icon: 'fa-cloud-sun',
            color: 'green-400',
            description: 'Mild temperatures with increasing daylight and unpredictable weather',
            tempRange: '0¬∞C to 10¬∞C',
            daylight: '12-18 hours',
            precipitation: 'Variable rain/snow',
            wind: 'Moderate winds',
            packingList: ['Layered clothing', 'Rain jacket', 'Sturdy hiking boots', 'Light gloves', 'Sunglasses']
          },
          'Summer': {
            icon: 'fa-sun',
            color: 'yellow-400',
            description: 'Warmest and driest season with midnight sun and lupine flowers blooming',
            tempRange: '10¬∞C to 18¬∞C',
            daylight: '19-24 hours',
            precipitation: 'Occasional light rain',
            wind: 'Light to moderate',
            packingList: ['Light layers', 'Light rain jacket', 'Hiking boots', 'Sunglasses', 'Sun hat', 'Shorts/t-shirts']
          },
          'Autumn': {
            icon: 'fa-leaf',
            color: 'orange-400',
            description: 'Cooler temperatures with Northern Lights returning and autumn colors',
            tempRange: '2¬∞C to 8¬∞C',
            daylight: '8-14 hours',
            precipitation: 'Frequent rain',
            wind: 'Increasing winds',
            packingList: ['Warm jacket', 'Waterproof layers', 'Warm boots', 'Hat & gloves', 'Northern Lights camera gear']
          }
        };
        
        return patterns[season];
      }

      // Generate weather tips based on season and dates
      function generateWeatherTips(travelDates) {
        const tips = [
          'Weather in Iceland changes rapidly - always pack layers',
          'Waterproof gear is essential year-round',
          'Check road conditions at <a href="https://www.road.is" target="_blank" class="text-orange-400 hover:text-orange-300">road.is</a> before traveling',
          'Strong winds are common - secure loose items and be careful with car doors'
        ];
        
        if (travelDates.hasValidDates) {
          const month = travelDates.startDateObj.getMonth();
          if (month >= 9 || month <= 3) {
            tips.push('Northern Lights season! Check aurora forecasts at <a href="https://en.vedur.is/weather/forecasts/aurora/" target="_blank" class="text-purple-400 hover:text-purple-300">vedur.is/aurora</a>');
          }
          if (month >= 11 || month <= 2) {
            tips.push('Winter driving requires extra caution - consider a 4WD vehicle');
            tips.push('Daylight is limited - plan activities around available light');
          }
          if (month >= 6 && month <= 8) {
            tips.push('Midnight sun season - bring eye masks for sleeping');
            tips.push('Perfect hiking weather but still pack rain gear');
          }
        }
        
        return `
          <div class="space-y-2 text-sm text-gray-300">
            ${tips.map(tip => `
              <div class="flex items-start gap-2">
                <i class="fas fa-lightbulb text-orange-400 text-xs mt-1 flex-shrink-0"></i>
                <span>${tip}</span>
              </div>
            `).join('')}
          </div>
        `;
      }

      // Fallback current weather
      function generateFallbackCurrentWeather() {
        return `
          <div class="text-center py-6">
            <i class="fas fa-cloud text-gray-400 text-4xl mb-4"></i>
            <p class="text-gray-300 mb-4">Showing typical seasonal weather patterns</p>
            <p class="text-sm text-gray-400">Iceland weather: 5-15¬∞C, variable conditions year-round</p>
          </div>
        `;
      }

      // Show weather error
      function showWeatherError(container) {
        container.innerHTML = `
          <div class="text-center py-8">
            <i class="fas fa-exclamation-triangle text-yellow-400 text-4xl mb-4"></i>
            <h4 class="text-xl font-bold text-white mb-4">Weather Data Temporarily Unavailable</h4>
            <p class="text-gray-400 mb-6">We're having trouble fetching the latest weather data.</p>
            
            <div class="glass-card p-6 rounded-xl text-left">
              <h5 class="font-semibold text-orange-300 mb-4">Alternative Weather Sources:</h5>
              <div class="space-y-3 text-sm">
                <a href="https://en.vedur.is/" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300">
                  <i class="fas fa-external-link-alt"></i>
                  Icelandic Met Office (vedur.is)
                </a>
                <a href="https://www.yr.no/en/forecast/country/Iceland" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300">
                  <i class="fas fa-external-link-alt"></i>
                  YR.no - Iceland Forecast
                </a>
                <a href="https://www.windy.com/?64.146,-21.942,5" target="_blank" class="flex items-center gap-2 text-blue-400 hover:text-blue-300">
                  <i class="fas fa-external-link-alt"></i>
                  Windy.com - Interactive Weather Map
                </a>
              </div>
            </div>
          </div>
        `;
      }

      // Get hotel recommendations based on destinations and preferences
      function getHotelRecommendations(destinations, budget, groupSize, duration) {
        const icelandHotels = {
          'Reykjavik': [
            {
              name: 'Hotel Reykjavik Centrum',
              location: 'Reykjavik City Center',
              rating: 4.2,
              reviews: 2840,
              priceRange: getBudgetPriceRange(budget, 'reykjavik'),
              description: 'Historic hotel in the heart of Reykjavik with modern amenities and traditional charm.',
              amenities: [
                { name: 'Free WiFi', icon: 'fa-wifi' },
                { name: 'Restaurant', icon: 'fa-utensils' },
                { name: 'Bar', icon: 'fa-cocktail' },
                { name: 'Fitness', icon: 'fa-dumbbell' }
              ],
              whyRecommended: 'Perfect base for exploring Reykjavik',
              bookingId: '82835'
            },
            {
              name: 'Canopy by Hilton Reykjavik',
              location: 'Reykjavik Downtown',
              rating: 4.5,
              reviews: 1650,
              priceRange: getBudgetPriceRange(budget, 'reykjavik', 'premium'),
              description: 'Modern boutique hotel with stunning harbor views and Nordic design.',
              amenities: [
                { name: 'Harbor View', icon: 'fa-water' },
                { name: 'Spa', icon: 'fa-spa' },
                { name: 'Restaurant', icon: 'fa-utensils' },
                { name: 'Free WiFi', icon: 'fa-wifi' }
              ],
              whyRecommended: 'Luxury option with excellent location',
              bookingId: '1264503'
            }
          ],
          'Akureyri': [
            {
              name: 'Hotel Kea by Keahotels',
              location: 'Akureyri Center',
              rating: 4.1,
              reviews: 1420,
              priceRange: getBudgetPriceRange(budget, 'akureyri'),
              description: 'Charming hotel in the heart of North Iceland\'s capital with mountain views.',
              amenities: [
                { name: 'Mountain View', icon: 'fa-mountain' },
                { name: 'Restaurant', icon: 'fa-utensils' },
                { name: 'Free WiFi', icon: 'fa-wifi' },
                { name: 'Parking', icon: 'fa-parking' }
              ],
              whyRecommended: 'Best base for northern attractions',
              bookingId: '82642'
            }
          ],
          'V√≠k': [
            {
              name: 'Hotel Katla by Keahotels',
              location: 'V√≠k √≠ M√Ωrdal',
              rating: 4.3,
              reviews: 980,
              priceRange: getBudgetPriceRange(budget, 'vik'),
              description: 'Modern hotel with glacier views, perfect for South Coast exploration.',
              amenities: [
                { name: 'Glacier View', icon: 'fa-snowflake' },
                { name: 'Restaurant', icon: 'fa-utensils' },
                { name: 'Free WiFi', icon: 'fa-wifi' },
                { name: 'Parking', icon: 'fa-parking' }
              ],
              whyRecommended: 'Ideal for South Coast waterfalls',
              bookingId: '1486503'
            }
          ],
          'H√∂fn': [
            {
              name: 'Hotel H√∂fn',
              location: 'H√∂fn, Southeast Iceland',
              rating: 4.0,
              reviews: 750,
              priceRange: getBudgetPriceRange(budget, 'hofn'),
              description: 'Cozy hotel with harbor views, gateway to Vatnaj√∂kull National Park.',
              amenities: [
                { name: 'Harbor View', icon: 'fa-water' },
                { name: 'Restaurant', icon: 'fa-utensils' },
                { name: 'Free WiFi', icon: 'fa-wifi' },
                { name: 'Parking', icon: 'fa-parking' }
              ],
              whyRecommended: 'Perfect for glacier adventures',
              bookingId: '82680'
            }
          ]
        };

        // Select hotels based on destinations in itinerary
        const recommendations = [];
        const maxHotels = duration <= 3 ? 2 : duration <= 5 ? 3 : 4;
        
        // Always include Reykjavik if it's in the itinerary or for short trips
        if (destinations.includes('Reykjavik') || duration <= 3) {
          const reykjavikHotels = icelandHotels['Reykjavik'];
          const selectedHotel = budget === 'Luxury' ? reykjavikHotels[1] : reykjavikHotels[0];
          recommendations.push(selectedHotel);
        }
        
        // Add hotels based on other key destinations
        destinations.forEach(dest => {
          if (dest !== 'Reykjavik' && icelandHotels[dest] && recommendations.length < maxHotels) {
            recommendations.push(icelandHotels[dest][0]);
          }
        });
        
        // Fill remaining slots with strategic locations
        if (recommendations.length < maxHotels) {
          const strategicLocations = ['Akureyri', 'V√≠k', 'H√∂fn'];
          strategicLocations.forEach(location => {
            if (!recommendations.find(h => h.location.includes(location)) && 
                icelandHotels[location] && recommendations.length < maxHotels) {
              recommendations.push(icelandHotels[location][0]);
            }
          });
        }
        
        return recommendations.slice(0, maxHotels);
      }

      // Get price range based on budget
      function getBudgetPriceRange(budget, location, tier = 'standard') {
        const basePrices = {
          'reykjavik': { budget: 80, mid: 150, luxury: 300 },
          'akureyri': { budget: 60, mid: 120, luxury: 200 },
          'vik': { budget: 70, mid: 130, luxury: 220 },
          'hofn': { budget: 65, mid: 125, luxury: 210 }
        };
        
        const locationPrices = basePrices[location] || basePrices['reykjavik'];
        const multiplier = tier === 'premium' ? 1.3 : 1;
        
        switch (budget) {
          case 'Budget':
            return `$${Math.round(locationPrices.budget * multiplier)}`;
          case 'Luxury':
            return `$${Math.round(locationPrices.luxury * multiplier)}`;
          default:
            return `$${Math.round(locationPrices.mid * multiplier)}`;
        }
      }

      // Generate star rating HTML
      function generateStarRating(rating) {
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        let stars = '';
        
        for (let i = 0; i < fullStars; i++) {
          stars += '<i class="fas fa-star"></i>';
        }
        if (hasHalfStar) {
          stars += '<i class="fas fa-star-half-alt"></i>';
        }
        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
        for (let i = 0; i < emptyStars; i++) {
          stars += '<i class="far fa-star"></i>';
        }
        
        return stars;
      }

      // Generate Booking.com URL
      function generateBookingUrl(hotel, userInputs) {
        const checkIn = userInputs.dates ? userInputs.dates.split(' ‚Üí ')[0] : '';
        const checkOut = userInputs.dates ? userInputs.dates.split(' ‚Üí ')[1] : '';
        const adults = getAdultCount(userInputs.groupSize);
        
        let url = `https://www.booking.com/hotel/is/${hotel.bookingId}.html?`;
        
        if (checkIn && checkOut) {
          const checkInDate = new Date(checkIn);
          const checkOutDate = new Date(checkOut);
          
          url += `checkin=${checkInDate.getFullYear()}-${String(checkInDate.getMonth() + 1).padStart(2, '0')}-${String(checkInDate.getDate()).padStart(2, '0')}&`;
          url += `checkout=${checkOutDate.getFullYear()}-${String(checkOutDate.getMonth() + 1).padStart(2, '0')}-${String(checkOutDate.getDate()).padStart(2, '0')}&`;
        }
        
        url += `group_adults=${adults}&group_children=0&no_rooms=1&`;
        url += `aid=1610687&`;  // Affiliate ID (you'd use your own)
        url += `utm_source=touron&utm_medium=referral`;
        
        return url;
      }

      // Get adult count from group size
      function getAdultCount(groupSize) {
        switch (groupSize) {
          case 'Solo traveler': return 1;
          case 'Couple': return 2;
          case 'Family with kids': return 2;
          case 'Group of friends': return 4;
          case 'Large group (6+)': return 6;
          default: return 2;
        }
      }

      // Extract destinations from itinerary text
      function extractDestinationsFromItinerary(itinerary) {
        if (!itinerary) return ['Reykjavik']; // Default fallback
        
        const destinations = [];
        const text = itinerary.toLowerCase();
        
        // List of major Iceland destinations to look for
        const icelandDestinations = [
          'reykjavik', 'akureyri', 'v√≠k', 'vik', 'h√∂fn', 'hofn', 
          'selfoss', 'hverager√∞i', 'hveragerdi', 'egilssta√∞ir', 'egilsstadir',
          'h√∫sav√≠k', 'husavik', '√≠safj√∂r√∞ur', 'isafjordur', 'westman islands',
          'stykkish√≥lmur', 'stykkisholmur', 'snaefellsnes', 'sn√¶fellsnes',
          'jokulsarlon', 'j√∂kuls√°rl√≥n', 'diamond beach', 'vatnajokull', 'vatnaj√∂kull'
        ];
        
        // Check for each destination in the itinerary
        icelandDestinations.forEach(dest => {
          if (text.includes(dest)) {
            // Normalize destination names
            let normalizedDest = dest;
            if (dest.includes('reykjavik')) normalizedDest = 'Reykjavik';
            else if (dest.includes('akureyri')) normalizedDest = 'Akureyri';
            else if (dest.includes('v√≠k') || dest.includes('vik')) normalizedDest = 'V√≠k';
            else if (dest.includes('h√∂fn') || dest.includes('hofn')) normalizedDest = 'H√∂fn';
            else if (dest.includes('egilssta√∞ir') || dest.includes('egilsstadir')) normalizedDest = 'Egilssta√∞ir';
            
            if (!destinations.includes(normalizedDest)) {
              destinations.push(normalizedDest);
            }
          }
        });
        
        // Always include Reykjavik if no destinations found or for short trips
        if (destinations.length === 0 || !destinations.includes('Reykjavik')) {
          destinations.unshift('Reykjavik');
        }
        
        console.log('Extracted destinations from itinerary:', destinations);
        return destinations;
      }

      // Show hotel error
      function showHotelError(container) {
        container.innerHTML = `
          <div class="text-center py-8">
            <i class="fas fa-bed text-gray-400 text-4xl mb-4"></i>
            <p class="text-gray-300 mb-4">Unable to load hotel recommendations</p>
            <p class="text-sm text-gray-400">Visit Booking.com directly to find accommodations</p>
            <a href="https://www.booking.com/country/is.html" target="_blank" 
               class="inline-flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg mt-4 transition-colors">
              <i class="fas fa-external-link-alt"></i>
              Browse Iceland Hotels
            </a>
          </div>
        `;
      }

      // Add smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
          });
        });
      });

      // Add entrance animation on scroll
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-fade-in');
          }
        });
      }, observerOptions);

      // Observe form elements
      document.querySelectorAll('.input-group, .grid').forEach(el => {
        observer.observe(el);
      });

      // Mobile-specific enhancements
      document.addEventListener('DOMContentLoaded', function() {
        // Prevent zoom on input focus for iOS
        if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
          const inputs = document.querySelectorAll('input, select, textarea');
          inputs.forEach(input => {
            input.addEventListener('focus', function() {
              this.style.fontSize = '16px';
            });
            input.addEventListener('blur', function() {
              this.style.fontSize = '';
            });
          });
        }

        // Add touch feedback for mobile
        const touchElements = document.querySelectorAll('button, label, .hover-lift, .hover-subtle');
        touchElements.forEach(element => {
          element.addEventListener('touchstart', function() {
            this.style.transform = 'scale(0.98)';
          });
          
          element.addEventListener('touchend', function() {
            setTimeout(() => {
              this.style.transform = '';
            }, 150);
          });
        });

        // Additional mobile calendar improvements
        const dateInput = document.getElementById('dates');
        if (dateInput) {
          // Remove calendar-open class when clicking outside
          document.addEventListener('click', function(e) {
            if (!e.target.closest('.flatpickr-calendar') && !e.target.closest('#dates')) {
              document.body.classList.remove('calendar-open');
            }
          });
        }

        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
          setTimeout(() => {
            window.scrollTo(0, 0);
          }, 500);
        });

        // Smooth scroll for mobile anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              const offsetTop = target.offsetTop - 20; // Add some padding
              window.scrollTo({
                top: offsetTop,
                behavior: 'smooth'
              });
            }
          });
        });
      });
    </script>
  </body>
</html>
